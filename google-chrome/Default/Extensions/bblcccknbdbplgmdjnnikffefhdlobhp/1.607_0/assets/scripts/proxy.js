var AppPxy={pxyList:null,sp:null,setAllPxy:function(list){this.pxyList=list;setTimeout(function(){startPing()},100)},setSPPxy:function(sp){this.sp=sp},isInList:function(list){if(list&&this.currentPxy!=null){var length=list.length;for(var i=0;i<length;i++){if(this.currentPxy.id==list[i].id&&this.currentPxy.info==list[i].info){return true}}}return false},getAutoProxy:function(){if(this.pxyList!=null){var node=null;var length=this.pxyList.length;for(var i=0;i<length;i++){var tmp=this.pxyList[i];if(tmp.info!=""){if(node==null){node=tmp}else{if(isInErrorProxy(node)&&!isInErrorProxy(tmp)){node=tmp}else{if((typeof(node.ping)=="undefined"||node.ping==-1)&&(typeof(tmp.ping)=="undefined"||tmp.ping==-1)){if((node.status==-1||node.status>tmp.status)&&!isInErrorProxy(tmp)){node=tmp}}else{if((typeof(node.ping)=="undefined"||node.ping==-1)&&!isInErrorProxy(tmp)){node=tmp}else{if(typeof(tmp.ping)=="undefined"||tmp.ping==-1){}else{if(node.status>tmp.status&&!isInErrorProxy(tmp)){node=tmp}else{if(node.status==tmp.status&&tmp.ping<node.ping&&((node.level>=999&&tmp.level>=999)||(node.level<999&&tmp.level<999))&&!isInErrorProxy(tmp)){node=tmp}}}}}}}}}return node}return null},getSelectProxy:function(id){if(this.pxyList!=null){if(id!=null&&id){var length=this.pxyList.length;for(var i=0;i<length;i++){var tmp=this.pxyList[i];if(id==tmp.id&&tmp.info!=""){if(tmp.level>=999&&limit>-1){return this.getAutoProxy()}return tmp}}return this.getAutoProxy()}else{return this.getAutoProxy()}}return null},getPxyById:function(id){if(this.pxyList){var length=this.pxyList.length;for(var i=0;i<length;i++){var tmp=this.pxyList[i];if(id==tmp.id){return tmp}}}return null},clear:function(){this.pxyList=null;stopPing()},getPxyList:function(){if(this.pxyList==null||typeof(this.pxyList)=="undefined"){this.pxyList=[]}else{return this.pxyList}},getIpList:function(){var list=[];var pList=AppPxy.getPxyList();for(var i in pList){var tmp=pList[i];if(tmp.info!=null&&tmp.info!=""&&tmp.ipInfo!=""){var ipInfo=tmp.ipInfo;try{ipInfo=XXTEA.decryptFromBase64(tmp.ipInfo,tmp.id+tmp.level)}catch(e){}var ip=ipInfo.split(":")[0];list.push(ip)}}return list}};