(self.webpackChunkapp=self.webpackChunkapp||[]).push([[17],{5350:function(st,V,l){l.d(V,{d:function(){return Z}});var Q=l(5134),G=l(7289),c=l(138),e=l(1048),w=l(435),P=l(7765),A=l(9870);function B(E,D){if(1&E&&(c.TgZ(0,"div",5),c.TgZ(1,"div",6),c._UZ(2,"svg-icons",7),c._uU(3),c.ALo(4,"translate"),c.qZA(),c._UZ(5,"div",8),c.qZA()),2&E){var U=c.oxw();c.xp6(3),c.hij(" ",c.lcZ(4,2,"popupHotCashbackTitle")," "),c.xp6(2),c.Q6J("innerHTML",U.autoPromotion.applyMessage,c.oJD)}}function x(E,D){if(1&E&&(c.TgZ(0,"div",9),c._UZ(1,"svg-icons",7),c._uU(2),c.ALo(3,"translate"),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA()),2&E){var U=c.oxw();c.xp6(2),c.hij(" ",c.lcZ(3,2,"popupHotCashbackLeftCount")," "),c.xp6(3),c.Oqu(U.autoPromotion.availableApplying)}}var R=function(D){return{stopTime:D}};function T(E,D){if(1&E){var U=c.EpF();c.TgZ(0,"div",10),c._UZ(1,"svg-icons",7),c._uU(2),c.ALo(3,"translate"),c.TgZ(4,"span"),c.TgZ(5,"countdown",11),c.NdJ("event",function(z){return c.CHM(U),c.oxw().handleEvent(z)}),c.qZA(),c.qZA(),c.qZA()}if(2&E){var H=c.oxw();c.xp6(2),c.hij(" ",c.lcZ(3,2,"popupHotCashbackTimer")," "),c.xp6(3),c.Q6J("config",c.VKq(4,R,H.timer))}}var M=function(D){return{"merchant-autopromotion-details--with-description":D}},Z=function(){function E(){(0,Q.Z)(this,E),this.finished=new c.vpe}return(0,G.Z)(E,[{key:"ngOnInit",value:function(){this.isApplied&&(this.timer=new Date(this.autoPromotion.endAt).getTime())}},{key:"isApplied",get:function(){return this.autoPromotion&&this.autoPromotion.endAt}},{key:"handleEvent",value:function(U){"done"===U.action.toLowerCase()&&this.finished.emit()}}]),E}();Z.\u0275fac=function(D){return new(D||Z)},Z.\u0275cmp=c.Xpm({type:Z,selectors:[["app-merchant-autopromo-details"]],inputs:{autoPromotion:"autoPromotion",showDescriptions:"showDescriptions"},outputs:{finished:"finished"},decls:5,vars:6,consts:[[1,"merchant-autopromotion-details",3,"ngClass"],["class","merchant-autopromotion-details__description",4,"ngIf"],[1,"merchant-autopromotion-details__bottom"],["class","merchant-autopromotion-details__left",4,"ngIf"],["class","merchant-autopromotion-details__timer",4,"ngIf"],[1,"merchant-autopromotion-details__description"],[1,"description-header"],["name","fire",1,"icon"],[3,"innerHTML"],[1,"merchant-autopromotion-details__left"],[1,"merchant-autopromotion-details__timer"],[3,"config","event"]],template:function(D,U){1&D&&(c.TgZ(0,"div",0),c.YNc(1,B,6,4,"div",1),c.TgZ(2,"div",2),c.YNc(3,x,6,4,"div",3),c.YNc(4,T,6,6,"div",4),c.qZA(),c.qZA()),2&D&&(c.Q6J("ngClass",c.VKq(4,M,U.showDescriptions)),c.xp6(1),c.Q6J("ngIf",U.showDescriptions),c.xp6(2),c.Q6J("ngIf",!U.isApplied),c.xp6(1),c.Q6J("ngIf",U.isApplied))},directives:[e.mk,e.O5,w.TI,P.MR],pipes:[A.X$],styles:["[_nghost-%COMP%]{font-family:Open Sans,sans-serif}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Open Sans,sans-serif}.merchant-autopromotion-details[_ngcontent-%COMP%]{margin-top:4px;display:block;width:100%}.merchant-autopromotion-details[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:12px;height:12px;display:block;margin-right:4px}.merchant-autopromotion-details__description[_ngcontent-%COMP%]{background:#FEECEB;padding:12px;line-height:16px;font-size:12px;color:#121212;border-radius:4px 4px 0 0}.merchant-autopromotion-details__description[_ngcontent-%COMP%]   .description-header[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;margin-bottom:8px}.merchant-autopromotion-details__description[_ngcontent-%COMP%]   .description-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#e23e32;margin-right:8px;width:14px;height:14px}.merchant-autopromotion-details__left[_ngcontent-%COMP%]{border-radius:4px;padding:4px 8px 4px 6px;display:inline-flex;align-items:center;white-space:nowrap;height:20px;font-size:10px;min-width:105px;background:#e23e32;color:#fff}.merchant-autopromotion-details__left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#fff}.merchant-autopromotion-details__left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-left:auto;padding-left:8px}.merchant-autopromotion-details__timer[_ngcontent-%COMP%]{border-radius:4px;padding:4px 8px 4px 6px;display:inline-flex;align-items:center;white-space:nowrap;height:20px;font-size:10px;width:100%;background:#feeceb}.merchant-autopromotion-details__timer[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#e23e32}.merchant-autopromotion-details__timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-left:auto;color:#e23e32}.merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__left[_ngcontent-%COMP%], .merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__timer[_ngcontent-%COMP%]{border-radius:0 0 4px 4px;color:#fff;background:#e23e32;width:100%;padding:8px 12px;font-weight:700;height:32px;font-size:12px}.merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__timer[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:none}.merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.merchant-autopromotion-details--with-description[_ngcontent-%COMP%]   .merchant-autopromotion-details__timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:16px}"]})},6209:function(st,V,l){l.d(V,{L:function(){return R}});var Q=l(5134),G=l(7289),c=l(138),e=l(1048),w=l(9870);function P(T,M){1&T&&(c.TgZ(0,"span",7),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&T&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"notificationMerchantRebate")," "))}function A(T,M){if(1&T&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&T){var Z=c.oxw();c.xp6(1),c.hij(" ",Z.oldRate," ")}}var B=function(M){return{"merchant-rate--large":M}},x=function(M){return{red:M}},R=function(){function T(){(0,Q.Z)(this,T)}return(0,G.Z)(T,[{key:"userCashbackIntegerValue",get:function(){return this.isAutopromoted?this.merchant.autoPromotion.cashbackRate.calculatedValue:this.merchant.userCashbackValue||this.merchant.rate}},{key:"merchantSuffix",get:function(){return this.isAutopromoted?this.merchant.autoPromotion.cashbackRate.suffix:this.merchant.suffix}},{key:"cashbackFloated",get:function(){return this.isAutopromoted?this.merchant.autoPromotion.cashbackRate.isFloated:this.merchant.cashbackFloated}},{key:"oldRate",get:function(){return this.merchant.cashback}},{key:"isAutopromoted",get:function(){return this.merchant.autoPromotion}},{key:"showOldRate",get:function(){var Z;return(null===(Z=this.merchant.cashbackRate)||void 0===Z?void 0:Z.rate)!==+this.userCashbackIntegerValue}}]),T}();R.\u0275fac=function(M){return new(M||R)},R.\u0275cmp=c.Xpm({type:R,selectors:[["app-merchant-rate"]],inputs:{merchant:"merchant",large:"large"},decls:9,vars:13,consts:[[1,"merchant-rate",3,"ngClass"],[1,"merchant-rate__rate"],[1,"merchant-rate__current"],["class","merchant-rate__floated",4,"ngIf"],[1,"merchant-rate__value",3,"ngClass"],[1,"merchant-rate__suffix",3,"ngClass"],["class","merchant-rate__old-rate",4,"ngIf"],[1,"merchant-rate__floated"],[1,"merchant-rate__old-rate"]],template:function(M,Z){1&M&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.YNc(3,P,3,3,"span",3),c.TgZ(4,"span",4),c._uU(5),c.qZA(),c.TgZ(6,"span",5),c._uU(7),c.qZA(),c.qZA(),c.YNc(8,A,2,1,"div",6),c.qZA(),c.qZA()),2&M&&(c.Q6J("ngClass",c.VKq(7,B,Z.large)),c.xp6(3),c.Q6J("ngIf",Z.cashbackFloated),c.xp6(1),c.Q6J("ngClass",c.VKq(9,x,Z.isAutopromoted)),c.xp6(1),c.hij(" ",Z.userCashbackIntegerValue," "),c.xp6(1),c.Q6J("ngClass",c.VKq(11,x,Z.isAutopromoted)),c.xp6(1),c.hij(" ",Z.merchantSuffix," "),c.xp6(1),c.Q6J("ngIf",Z.showOldRate))},directives:[e.mk,e.O5],pipes:[w.X$],styles:[".merchant-rate[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#121212;display:inline-flex;flex-wrap:wrap;white-space:nowrap}.merchant-rate__rate[_ngcontent-%COMP%]{display:flex;flex-direction:column}.merchant-rate__current[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-wrap:nowrap}.merchant-rate__floated[_ngcontent-%COMP%]{margin-right:6px}.merchant-rate__value[_ngcontent-%COMP%]{font-size:16px;line-height:16px;margin-right:4px}.merchant-rate__old-rate[_ngcontent-%COMP%]{width:100%;display:block;text-align:left;color:#a0a0a0;margin-top:2px;text-decoration:line-through}.merchant-rate[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{color:#e23e32}.merchant-rate--large[_ngcontent-%COMP%]   .merchant-rate__value[_ngcontent-%COMP%]{line-height:24px;font-size:24px}"],changeDetection:0})},8224:function(st,V,l){l.d(V,{E:function(){return e}});var Q=l(5134),G=l(7289),c=l(138),e=function(){function w(){(0,Q.Z)(this,w)}return(0,G.Z)(w,[{key:"onClick",value:function(A){A.stopPropagation()}}]),w}();e.\u0275fac=function(P){return new(P||e)},e.\u0275dir=c.lG2({type:e,selectors:[["","appClickStopPropagation",""]],hostBindings:function(P,A){1&P&&c.NdJ("click",function(x){return A.onClick(x)})}})},8561:function(st,V,l){l.d(V,{q:function(){return x}});var Q=l(6054),G=l(5134),c=l(7289),e=l(8774),w=l.n(e),P=l(4762),A=l(138),B=l(9725),x=function(){function R(T){(0,G.Z)(this,R),this.httpClient=T,this.baseUrl="https://gpsfront.aliexpress.com",this.recommendingResults="/getI2iRecommendingResults.do",this.baseUrlNewDesign="https://aliexpress.ru/aer-api/v1",this.recommendation="/seller/recommendation",this.specialForYou="/product/detail/special_for_you"}return(0,c.Z)(R,[{key:"getAliSimilarItems",value:function(M,Z,E,D){var U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"pcDetailLeftTopSell",H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,z="currentItemList=".concat(M,"&categoryId=\n\t\t\t").concat(Z,"&shopId=").concat(E,"&companyId=\n\t\t\t").concat(D,"&scenario=").concat(U,"&limit=\n\t\t\t").concat(H,"&offset=").concat(N);return"".concat(this.baseUrl).concat(this.recommendingResults,"?").concat(z)}},{key:"getAliexpressSimilarItems",value:function(M){return(0,P.mG)(this,void 0,void 0,w().mark(function Z(){return w().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.httpClient.get(M).toPromise().then(function(U){var H=[];if(U&&U.results.length){var z,N=(0,Q.Z)(U.results);try{for(N.s();!(z=N.n()).done;){var C=z.value,t=new URL("https:".concat(C.productDetailUrl));C.productDetailUrl=t.origin+t.pathname,H.push(C)}}catch(r){N.e(r)}finally{N.f()}}return H}));case 1:case"end":return D.stop()}},Z,this)}))}},{key:"getAliexpressRecommendation",value:function(M){return"".concat(this.baseUrlNewDesign).concat(this.recommendation,"?product_id=").concat(M)}},{key:"getAliexpressSpecialForYou",value:function(M){return"".concat(this.baseUrlNewDesign).concat(this.specialForYou,"?product_id=").concat(M)}},{key:"getAliexpressRecommendationSimilarItems",value:function(M){return(0,P.mG)(this,void 0,void 0,w().mark(function Z(){return w().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.httpClient.post(M,JSON.stringify({pageSize:50})).toPromise().then(function(U){var H=[];if(U&&U.products.length){var z,N=(0,Q.Z)(U.products);try{for(N.s();!(z=N.n()).done;){var C=z.value,t=new URL("https:".concat(C.url));C.productDetailUrl=t.origin+t.pathname,C.productId=C.id,C.productImage=C.imgUrl,C.productTitle=C.title,C.minPrice=C.price,H.push(C)}}catch(r){N.e(r)}finally{N.f()}}return H}));case 1:case"end":return D.stop()}},Z,this)}))}}]),R}();x.\u0275fac=function(T){return new(T||x)(A.LFG(B.eN))},x.\u0275prov=A.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})},121:function(st,V,l){l.d(V,{r:function(){return H}});var Q=l(6054),G=l(6860),c=l(5134),e=l(7289),w=l(8774),P=l.n(w),A=l(4762),B=l(8372),x=l(9433),R=l(5848),T=l(2522),M=l(7301),Z=l(138),E=l(4800),D=l(8561),U=l(9725),H=function(){function z(C,t,r,p){(0,c.Z)(this,z),this.sanitizer=C,this.eventService=t,this.aliexpressProductsService=r,this.httpClient=p,this.baseUrl=B.S._tools,this.itemHistory="/api/extension/v1/item/history",this.itemInfo="/api/extension/v1/item/info",this.affiliateCheck="/api/extension/v1/affiliate/check",this.affiliateCheckList="/api/extension/v1/affiliate/check-list"}return(0,e.Z)(z,[{key:"init",value:function(t,r){return(0,A.mG)(this,void 0,void 0,P().mark(function p(){var s,_,h,m;return P().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.application=r,(s=t.data)&&s.priceData){d.next=4;break}return d.abrupt("return",null);case 4:return _=this.application.merchants.selectByDomain(R.cQ.getDomain(s.href)),h=this.application.get("user"),d.next=8,this.getPriceSellerData(t,_);case 8:if(m=d.sent){d.next=11;break}return d.abrupt("return",{empty:!0});case 11:if(!this.isMerchantHasSellerInfo(_)){d.next=15;break}return d.next=14,this.setUpHistoryItems(Object.assign(Object.assign({},m),{productReviewsText:s.productReviewsText,countSoldItemText:s.countSoldItemText}));case 14:m=d.sent;case 15:return d.t0=m,d.t1=s,d.t2=this.isMerchantHasSellerInfo(_),d.t3=this.isMerchantHasSellerInfo(_)&&this.historyInfo(m),d.t4=_.toJSON(),d.t5=h.toJSON(),d.next=23,this.getAffiliateStatus(s,_,h);case 23:return d.t6=d.sent,d.abrupt("return",{rawData:d.t0,pageData:d.t1,hasSellerInfo:d.t2,history:d.t3,merchant:d.t4,user:d.t5,affiliate:d.t6});case 25:case"end":return d.stop()}},p,this)}))}},{key:"getPriceSellerData",value:function(t,r){return(0,A.mG)(this,void 0,void 0,P().mark(function p(){var s,_;return P().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s={},this.isEventValid(t)){m.next=3;break}return m.abrupt("return",null);case 3:return m.next=5,M.V.syncGet("locale");case 5:return s.locale=m.sent,s.language=s.locale.split("_")[0],m.next=9,this.getPriceInfo(t,r);case 9:if((_=m.sent)&&(s=Object.assign(Object.assign({},s),_)),this.isValid(s)){m.next=13;break}return m.abrupt("return",null);case 13:return m.abrupt("return",JSON.parse(JSON.stringify(s)));case 14:case"end":return m.stop()}},p,this)}))}},{key:"getAffiliateStatus",value:function(t,r,p){return(0,A.mG)(this,void 0,void 0,P().mark(function s(){var _,h,m,u,d,y,f;return P().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return _=new URL(t.href),h=R.cQ.isAliexpressProductPage(_.pathname),L.next=4,R.cQ.matchLocaleCookie(x.g.NO_ALI_AFFILIATE_COUNTRY);case 4:if(m=L.sent,u={status:null,isAffiliate:!1,show:!1},h&&m){L.next=10;break}return u.isAffiliate=!0,u.show=!1,L.abrupt("return",u);case 10:return d=_.origin+_.pathname,L.next=13,this.checkAffiliateAliItem(d,p);case 13:if(y=L.sent,f=y&&y.result){L.next=20;break}return u.isAffiliate=!1,u.status="unknown",u.icon="alert",L.abrupt("return",u);case 20:if(r){L.next=25;break}return u.isAffiliate=!1,u.status="unknown",u.icon="alert",L.abrupt("return",u);case 25:return y||(u.status="unknown",u.icon="alert"),y&&f&&r.isActivated&&(u.status="success",u.icon="check"),y&&f&&!r.isActivated&&(u.status="pending",u.icon="alert"),y&&!f&&(u.status="failur",u.icon="alert"),u.isAffiliate=f,u.show=!0,this.eventService.fireEvent(T.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"pageview",page:"".concat(x.g.gaPrefixMonitor,"view/notification/").concat(u.status,"/")}}),L.abrupt("return",u);case 33:case"end":return L.stop()}},s,this)}))}},{key:"sellerResume",value:function(t){var r,p,s,_;return null===(_=null===(s=null===(p=null===(r=null==t?void 0:t.price)||void 0===r?void 0:r.targetInfo)||void 0===p?void 0:p.itemInfo)||void 0===s?void 0:s.seller)||void 0===_?void 0:_.resume}},{key:"isValid",value:function(t){var r,p;if(!t||!t.targetInfo)return null;var s=t.targetInfo.itemInfo;return!!(null==s?void 0:s.url)||!!(null===(r=null==s?void 0:s.dynamic)||void 0===r?void 0:r.value)||!!(null===(p=null==s?void 0:s.seller)||void 0===p?void 0:p.score)}},{key:"isEventValid",value:function(t){var r,p;return(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.href)&&(null===(p=null==t?void 0:t.data)||void 0===p?void 0:p.priceData)}},{key:"isMerchantHasSellerInfo",value:function(t){return t&&x.g.ARRAY_MERCHANTS_PRICE_SELLER.includes(t.id)}},{key:"isValidSellerInfo",value:function(t){}},{key:"getPriceDynamicChartData",value:function(t){return(0,A.mG)(this,void 0,void 0,P().mark(function r(){var p,s,_,h,m,u,d,y,f,F,L,k,Y,I;return P().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=t.data,s=p.user,_=p.pageData,h=p.targetInfo,q.next=3,this.getPriceChartData(_.priceData,s,h.itemInfo);case 3:if((m=q.sent).list){q.next=6;break}return q.abrupt("return",null);case 6:return u=(new Date).getTime(),d=new Date(u-2592e6).getTime(),y=this.getArrayFromPeriodDate(d,u,_.month),f=m.list[0].currency.sign,F=this.prepareChartData({list:m,month:_.month,previousDate:d,currentDate:u}),L=F.dataPriceDate,k=F.arrMinPrice,Y=Math.min.apply(Math,(0,G.Z)(k)),I=Math.max.apply(Math,(0,G.Z)(k)),q.abrupt("return",{chart:this.prepareChart(L,y,I,f),minPrice:N.getPrice(Y,f),maxPrice:N.getPrice(I,f),priceLast:N.getPrice(h.itemInfo.priceLast.min,f),description:h.itemInfo.dynamic.ItemDynamic.ItemDynamicSvg.text});case 14:case"end":return q.stop()}},r,this)}))}},{key:"prepareChartData",value:function(t){var r=t.list,p=t.previousDate,s=t.currentDate,_=t.month,h=[],m=[];return r.list.sort(function(u,d){return u.timestamp-d.timestamp}).forEach(function(u){if(1e3*u.timestamp<p){var d=new Date(p);d.setDate(d.getDate()-3),h.length>0?(h[0].x="".concat(d.getDate()," ").concat(_[d.getMonth()]," ").concat(d.getFullYear()),h[0].y=u.min,h[0].time=1e3*u.timestamp,h[0].dateStr="".concat(d.getDate()," ").concat(_[d.getMonth()])):h.push({x:"".concat(d.getDate()," ").concat(_[d.getMonth()]," ").concat(d.getFullYear()),y:u.min,time:1e3*u.timestamp,dateStr:"".concat(d.getDate()," ").concat(_[d.getMonth()])})}if(1e3*u.timestamp>p&&1e3*u.timestamp<s){var y=new Date(1e3*u.timestamp);m.push(u.min),h.push({x:"".concat(y.getDate()," ").concat(_[y.getMonth()]," ").concat(y.getFullYear()),y:u.min,time:1e3*u.timestamp,dateStr:"".concat(y.getDate()," ").concat(_[y.getMonth()])})}}),{dataPriceDate:h,arrMinPrice:m}}},{key:"getArrayFromPeriodDate",value:function(t,r,p){var s=[];for((t=new Date(t)).setDate(t.getDate()-3),(r=new Date(r)).setDate(r.getDate()+3),s.push("".concat(new Date(t).getDate()," ").concat(p[new Date(t).getMonth()]," ").concat(new Date(t).getFullYear()));t<r;)(t=new Date(t)).setDate(t.getDate()+1),s.push("".concat(new Date(t).getDate()," ").concat(p[new Date(t).getMonth()]," ").concat(new Date(t).getFullYear()));return s}},{key:"prepareChart",value:function(t,r,p,s){return{signPrice:s,labels:r,datasets:[{data:t,backgroundColor:"transparent",borderColor:"#bce0fc",pointBackgroundColor:"#00A8FF",pointBorderColor:"#00A8FF",tension:.5}],options:{bezierCurve:!0,plugins:{legend:{display:!1},tooltip:{mode:"nearest",intersect:!1,displayColors:!1,callbacks:{}}},scales:{y:{beginAtZero:!0,grid:{borderDash:[5,5]},ticks:{min:0,stepSize:Math.ceil(Math.ceil(p+.1*p)/4)}},x:{grid:{display:!1},ticks:{display:!1}}}}}}},{key:"historyInfo",value:function(t){var r=t.targetInfo.itemInfo,p=t.historyItems;return r&&t&&p?t.historyItems.map(function(s){return{productDetailUrl:s.urlItem,productImage:s.imageItem,productTitle:s.name,minPrice:N.getPrice(s.priceLastMin,r.dynamic.currency.sign),orders:s.countSoldItem,reviews:s.countReviewsItem,sellerResumeStatusItem:{icon:"smile_"+s.sellerResumeStatusItem,value:s.sellerResumeScoreItem.value},priceDynamicItem:{icon:s.priceDynamicItem.ItemDynamic.ItemDynamicSvg.icon,svgIcon:s.priceDynamicItem.ItemDynamic.ItemDynamicSvg.svg,value:"".concat(s.priceDynamicItem.sign," ").concat(N.getPrice(s.priceDynamicItem.value,s.priceDynamicItem.currency.sign))}}}):null}},{key:"setUpHistoryItems",value:function(t){return(0,A.mG)(this,void 0,void 0,P().mark(function r(){var p,s,_;return P().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.getHistoryItems();case 2:return p=m.sent,s=p.slice(),_=this.setHistoryItems(p,t.id,t),M.V.set("historyItems",_),t.historyItems=this.setHistoryItemUrl(s,t.merchant),m.abrupt("return",t);case 8:case"end":return m.stop()}},r,this)}))}},{key:"clearHistoryItems",value:function(){return(0,A.mG)(this,void 0,void 0,P().mark(function t(){var r;return P().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,M.V.syncGet("historyItems");case 2:return r=s.sent,M.V.set("historyItems",[r.pop()]),s.abrupt("return",!0);case 5:case"end":return s.stop()}},t)}))}},{key:"setHistoryItemUrl",value:function(t,r){var p=r.id,s=r.isActivated;return t.map(function(_){return R.cQ.isAliexpressCis(p)||(_.urlItem=s?R.cQ.getGoUrlItem(p,_.urlItem):R.cQ.getViewUrlItem(p,_.urlItem)),_})}},{key:"setHistoryItems",value:function(t,r,p){if(t.find(function(_){return _.idItem===r}))return t;var s=this.createHistoryItem(r,p);return t.concat([s])}},{key:"createHistoryItem",value:function(t,r){var p=new URL(r.targetInfo.itemInfo.url);return{idItem:t,nameItem:r.targetInfo.itemInfo.name,countReviewsItem:r.productReviewsText?parseInt(r.productReviewsText,10):"-",countSoldItem:r.countSoldItemText?parseInt(r.countSoldItemText,10):"-",urlItem:p.origin+p.pathname,imageItem:r.targetInfo.itemInfo.img,sellerResumeScoreItem:r.targetInfo.itemInfo.seller.resume.score,sellerResumeStatusItem:r.targetInfo.itemInfo.seller.resume.decodeNotes.notesScore.status,priceDynamicItem:r.targetInfo.itemInfo.dynamic,priceLastMin:r.targetInfo.itemInfo.priceLast.min}}},{key:"getHistoryItems",value:function(){return(0,A.mG)(this,void 0,void 0,P().mark(function t(){var r;return P().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,M.V.syncGet("historyItems");case 2:return r=s.sent,s.abrupt("return",r||[]);case 4:case"end":return s.stop()}},t)}))}},{key:"getSimilarProducts",value:function(t){return(0,A.mG)(this,void 0,void 0,P().mark(function r(){var p,s,_,h,m,u,d;return P().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return p=t.data,s=p.runParams,_=p.merchant,h=_.id,m=_.isActivated,u=p.url,t.data.urlsSimilarItems=this.getUrlsSimilarItems(s,u),f.next=4,this.getPriceSimilarProducts(t);case 4:if(!(d=f.sent)||!d.length){f.next=7;break}return f.abrupt("return",d.map(function(F){return R.cQ.isAliexpressCis(h)||(F.productDetailUrl=m?R.cQ.getGoUrlItem(h,F.productDetailUrl):R.cQ.getViewUrlItem(h,F.productDetailUrl)),F}));case 7:return f.abrupt("return",null);case 8:case"end":return f.stop()}},r,this)}))}},{key:"getUrlsSimilarItems",value:function(t,r){if(t){var s=t.data.recommendModule,_=s.productId,h=s.categoryId,m=s.storeNum,u=s.companyId,d=s.features.recommendGpsScenarioOtherSellerProducts,y=s.features.recommendGpsScenarioTopSelling;return{urlTopSell:this.aliexpressProductsService.getAliSimilarItems(_,h,m,u,y,5),urlOtherSeller:this.aliexpressProductsService.getAliSimilarItems(_,h,m,u,d)}}var f=r.match(new RegExp(/[\d*]{1,}/gim))[0];return f?{urlTopSell:this.aliexpressProductsService.getAliexpressSpecialForYou(f),urlOtherSeller:this.aliexpressProductsService.getAliexpressRecommendation(f),productId:f}:null}},{key:"getPriceInfo",value:function(t,r){return(0,A.mG)(this,void 0,void 0,P().mark(function p(){var s,_,h,m,u,d,y,f,F,L;return P().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(s=null,_=t.data,h=_.priceData,m=_.href,u=this.application.get("tabs").selectById(t.tabId),d=this.application.get("user"),!r||!x.g.ARRAY_MERCHANTS_PRICE.includes(r.id)){Y.next=20;break}return y="".concat(h.id,"_").concat(h.region?"".concat(h.region,"_"):"").concat(h.currencyDisplay),Y.next=8,M.V.syncGet(y);case 8:if((f=Y.sent)&&!((new Date).getTime()-f.createdAt>x.g.UPDATE_INTERVAL_INFO_HISTORY_PRICE)){Y.next=18;break}return F=t.url.includes("http")?t.url:m,Y.next=13,this.getTargetInfo(F,h,d);case 13:(f=Y.sent).createdAt=(new Date).getTime(),f&&f.itemInfo&&f.itemInfo.dynamic&&(f.itemInfo.dynamic.value>0?f.itemInfo.dynamic.sign="+":f.itemInfo.dynamic.value<0?f.itemInfo.dynamic.sign="-":f.itemInfo.dynamic.sign="",f.itemInfo.dynamic.value=Math.abs(f.itemInfo.dynamic.value),f.itemInfo.dynamic.ItemDynamic=this.getDecodeItemDynamic(f),h&&Object.keys(h).length&&(f.itemInfo.priceLast.dataPricePage=h)),f&&f.itemInfo&&f.itemInfo.seller&&(f.itemInfo.seller.resume.score.value=parseInt(f.itemInfo.seller.resume.score.value,10),f.itemInfo.seller.resume.decodeNotes=this.getDecodeNotes(f)),M.V.set(y,f);case 18:L=r&&r.get("hasPromoActivated")?this.application.get("offers").get(+r.get("hasPromoActivated")):null,u&&(r.attributes.extendedTab=u.attributes,r.attributes.extendedPromo=L,s={merchant:r.attributes,isLogin:d.isLogin(),targetInfo:f||"",id:h.id,region:h.region});case 20:return Y.abrupt("return",s);case 21:case"end":return Y.stop()}},p,this)}))}},{key:"getDecodeItemDynamic",value:function(t){var r={};switch(t.itemInfo.dynamic.type){case x.g.TYPE_NO_CHANGE:r.icon="dynamic_no_changes",r.text="notificationPriceTypeNoChangeText";break;case x.g.TYPE_MINOR_DOWN:r.icon="dynamic_low_down",r.text="notificationPriceTypeMinorDownText";break;case x.g.TYPE_DOWN:r.icon="dynamic_down",r.text="notificationPriceTypeDownText";break;case x.g.TYPE_MINOR_DOWN_AFTER_UP:r.icon="dynamic_down_after_up",r.text="notificationPriceTypeMinorAfterUpText";break;case x.g.TYPE_MINOR_UP_AFTER_DOWN:r.icon="dynamic_up_after_down",r.text="notificationPriceTypeMinorAfterDownText";break;case x.g.TYPE_UP:r.icon="dynamic_up",r.text="notificationPriceTypeUpText";break;case x.g.TYPE_MINOR_UP:r.icon="dynamic_low_up",r.text="notificationPriceTypeMinorUpText"}return{ItemDynamicSvg:r}}},{key:"getDecodeNotes",value:function(t){var p=t.itemInfo.seller.resume;function y(J){var O={};switch(J){case x.g.LEVEL_ERROR:O.color=x.g.LEVEL_ERROR_COLOR,O.status=x.g.LEVEL_ERROR_STATUS;break;case x.g.LEVEL_WARNING:O.color=x.g.LEVEL_WARNING_COLOR,O.status=x.g.LEVEL_WARNING_STATUS;break;case x.g.LEVEL_INFO:O.color=x.g.LEVEL_INFO_COLOR,O.status=x.g.LEVEL_INFO_STATUS}return O}function f(J,O){switch(J){case 0:O.text="notificationPriceTypeScore1";break;case 1:O.text="notificationPriceTypeScore2";break;case 2:O.text="notificationPriceTypeScore3";break;case 3:O.text="notificationPriceTypeScore4"}}function F(J,O){switch(J){case 4:O.text="notificationPriceTypeFeedback1";break;case 5:O.text="notificationPriceTypeFeedback2";break;case 6:O.text="notificationPriceTypeFeedback3";break;case 7:O.text="notificationPriceTypeFeedback4"}}function L(J,O,pt){switch(J){case 8:O.text="notificationPriceTypeAge1";break;case 9:O.text="notificationPriceTypeAge2";break;case 10:O.text="notificationPriceTypeAge3",O.textArg=pt}}function k(J,O){switch(J){case 11:O.text="notificationPriceTypeDescription1";break;case 12:O.text="notificationPriceTypeDescription2";break;case 13:O.text="notificationPriceTypeDescription3";break;case 14:O.text="notificationPriceTypeDescription4";break;case 15:O.text="notificationPriceTypeDescription5"}}function Y(J,O){switch(J){case 16:O.text="notificationPriceTypeCommunication1";break;case 17:O.text="notificationPriceTypeCommunication2";break;case 18:O.text="notificationPriceTypeCommunication3";break;case 19:O.text="notificationPriceTypeCommunication4";break;case 20:O.text="notificationPriceTypeCommunication5"}}function I(J,O){switch(J){case 21:O.text="notificationPriceTypeShipping1";break;case 22:O.text="notificationPriceTypeShipping2";break;case 23:O.text="notificationPriceTypeShipping3";break;case 24:O.text="notificationPriceTypeShipping4";break;case 25:O.text="notificationPriceTypeShipping5"}}var lt,W={color:"",status:"",text:""},q=W,nt=W,tt=W,it=W,ot=W,at=W,rt=(0,Q.Z)(p.notes);try{for(rt.s();!(lt=rt.n()).done;){var j=lt.value;switch(j.group){case 0:q=y(j.level),f(j.type,q),{notesScore:q};break;case 1:nt=y(j.level),F(j.type,nt),{notesFeedback:nt};break;case 2:tt=y(j.level),L(j.type,tt,j.tokens[0].value),{notesAge:tt};break;case 3:it=y(j.level),k(j.type,it),{notesDescription:it};break;case 4:ot=y(j.level),Y(j.type,ot),{notesCommunication:ot};break;case 5:at=y(j.level),I(j.type,at),{notesShipping:at}}}}catch(J){rt.e(J)}finally{rt.f()}return{notesScore:q,notesFeedback:nt,notesAge:tt,notesDescription:it,notesCommunication:ot,notesShipping:at}}},{key:"getPriceChartData",value:function(t,r,p){return(0,A.mG)(this,void 0,void 0,P().mark(function s(){var _,h,m,u,d,y,f,F,L,k;return P().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(_={data:{itemInfo:p}},I.prev=1,h=t.id,m=t.region,u=t.currencyDisplay,!h||!h.length){I.next=24;break}return d="".concat(h,"_").concat(m?"".concat(m,"_"):"").concat(u,"_chartData"),y="".concat(h,"_").concat(m?"".concat(m,"_"):"").concat(u,"_chartTimeLastUpdated"),I.next=8,M.V.syncGet(y);case 8:if((f=I.sent)&&!(Date.now()-f>x.g.UPDATE_INTERVAL_INFO_HISTORY_PRICE)){I.next=19;break}return I.next=12,this.getPriceHistory(_,r);case 12:if(!(F=I.sent)){I.next=17;break}return M.V.set(d,F),M.V.set(y,Date.now()),I.abrupt("return",F);case 17:I.next=24;break;case 19:return I.next=21,M.V.syncGet(d);case 21:if(!(L=I.sent)){I.next=24;break}return I.abrupt("return",L);case 24:I.next=33;break;case 26:return I.prev=26,I.t0=I.catch(1),I.next=30,this.getPriceHistory(_,r);case 30:if(!(k=I.sent)){I.next=33;break}return I.abrupt("return",k);case 33:case"end":return I.stop()}},s,this,[[1,26]])}))}},{key:"getPriceHistory",value:function(t,r){var p=t.data.itemInfo,s=p.priceLast.dataPricePage,_=Object.keys(s).length;return this.getItemHistory(p,s,_,r)}},{key:"getItemHistory",value:function(t,r,p,s){return(0,A.mG)(this,void 0,void 0,P().mark(function _(){var h,m;return P().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return h=new URL("".concat(this.baseUrl).concat(this.itemHistory)),m={id:t.id.id,type:t.id.type,priceMin:t&&0!==p?r.priceMin:"",priceMax:t&&0!==p?r.priceMax:"",currency:t&&0!==p?r.currency:"",priceMinDisplay:t&&0!==p?r.priceMinDisplay:"",priceMaxDisplay:t&&0!==p?r.priceMaxDisplay:"",currencyDisplay:t&&0!==p?r.currencyDisplay:"",timezone:t&&0!==p?r.timezone:""},Object.keys(m).forEach(function(y){h.searchParams.append(y,m[y])}),d.abrupt("return",this.httpClient.get(h.href,{headers:this.getHeaders(s)}).toPromise().then(function(y){return y}));case 4:case"end":return d.stop()}},_,this)}))}},{key:"getHeaders",value:function(t,r){var p=t.attributes?t.attributes:t;return{Accept:"application/json","Content-Type":"application/json","app-token":x.g.APP_TOKEN,"extension-token":p.tokenCookies&&p.tokenCookies.eaetkn?p.tokenCookies.eaetkn:"","user-token":p.tokenCookies&&p.tokenCookies.eautkn?p.tokenCookies.eautkn:"",referrer:r||"","version-ext":chrome.runtime.getManifest().version}}},{key:"getPriceSimilarProducts",value:function(t){return(0,A.mG)(this,void 0,void 0,P().mark(function r(){var p,s,_,h,m,u,d,f,F;return P().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=t.data.merchant.id,s=this.application.get("user"),_=[],k.prev=3,null===t.data.urlsSimilarItems||!x.g.ARRAY_MERCHANTS_PRICE_SELLER.includes(p)){k.next=31;break}if(t.data.urlsSimilarItems.productId){k.next=15;break}return k.next=8,this.aliexpressProductsService.getAliexpressSimilarItems(t.data.urlsSimilarItems.urlTopSell);case 8:return h=k.sent,k.next=11,this.aliexpressProductsService.getAliexpressSimilarItems(t.data.urlsSimilarItems.urlOtherSeller);case 11:m=k.sent,_=h.concat(m),k.next=22;break;case 15:return k.next=17,this.aliexpressProductsService.getAliexpressRecommendationSimilarItems(t.data.urlsSimilarItems.urlTopSell);case 17:return u=k.sent,k.next=20,this.aliexpressProductsService.getAliexpressRecommendationSimilarItems(t.data.urlsSimilarItems.urlOtherSeller);case 20:d=k.sent,_=u.concat(d);case 22:return k.next=24,R.cQ.matchLocaleCookie(x.g.NO_ALI_AFFILIATE_COUNTRY);case 24:if(!k.sent){k.next=31;break}return f=_.map(function(Y){return{input:Y.productId}}),k.next=29,this.checkArrayAffiliateAliItems(f,s);case 29:F=k.sent,_=_.filter(function(Y){return F.list.find(function(I){return I.input===Y.productId&&!!I.result})});case 31:k.next=36;break;case 33:k.prev=33,k.t0=k.catch(3),console.error(k.t0);case 36:return k.abrupt("return",_.filter(function(Y){return Y&&Y.productId}));case 37:case"end":return k.stop()}},r,this,[[3,33]])}))}},{key:"checkAffiliateAliItem",value:function(t,r){return(0,A.mG)(this,void 0,void 0,P().mark(function p(){return P().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",this.httpClient.post("".concat(this.baseUrl).concat(this.affiliateCheck),JSON.stringify({input:t}),{headers:this.getHeaders(r)}).toPromise().then(function(h){return h}));case 1:case"end":return _.stop()}},p,this)}))}},{key:"checkArrayAffiliateAliItems",value:function(t,r){return(0,A.mG)(this,void 0,void 0,P().mark(function p(){return P().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",this.httpClient.post("".concat(this.baseUrl).concat(this.affiliateCheckList),JSON.stringify({list:t}),{headers:this.getHeaders(r)}).toPromise().then(function(h){return h}));case 1:case"end":return _.stop()}},p,this)}))}},{key:"getTargetInfo",value:function(t,r,p){return(0,A.mG)(this,void 0,void 0,P().mark(function s(){var _,h,m;return P().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return _=Object.keys(r).length,h=new URL("".concat(this.baseUrl).concat(this.itemInfo)),m={url:t,priceMin:r&&0!==_?r.priceMin:"",priceMax:r&&0!==_?r.priceMax:"",currency:r&&0!==_?r.currency:"",priceMinDisplay:r&&0!==_?r.priceMinDisplay:"",priceMaxDisplay:r&&0!==_?r.priceMaxDisplay:"",currencyDisplay:r&&0!==_?r.currencyDisplay:"",timezone:r&&0!==_?r.timezone:""},Object.keys(m).forEach(function(y){h.searchParams.append(y,m[y])}),d.abrupt("return",this.httpClient.get(h.href,{headers:this.getHeaders(p)}).toPromise().then(function(y){return y}));case 5:case"end":return d.stop()}},s,this)}))}}]),z}();H.\u0275fac=function(C){return new(C||H)(Z.LFG(E.H7),Z.LFG(T.P),Z.LFG(D.q),Z.LFG(U.eN))},H.\u0275prov=Z.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"});var N=function(){function z(){(0,c.Z)(this,z)}return(0,e.Z)(z,null,[{key:"getPrice",value:function(t,r){var p=parseFloat(t.toFixed(2)).toLocaleString("en").replace(/,/g," ");return"\u20bd"===r?"".concat(p," \u0440\u0443\u0431."):"".concat(r).concat(p)}}]),z}()},6715:function(st,V,l){l.d(V,{S:function(){return K}});var Q=l(5134),G=l(7289),c=l(1048),e=l(138),w=l(9433),P=l(5848),A=l(2522),B=(0,G.Z)(function i(){(0,Q.Z)(this,i)});B.SellerInfo="analysis",B.PriceDynamic="dynamic",B.History="view-history",B.SimilarProducts="similar-products";var x=l(9899),R=l(4800),T=l(121),M=l(664),Z=l(8778),E=l(9870),D=l(8471),U=l(435),H=l(4388),N=l(7290),z=l(2059),C=l(9184),t=l(4261),r=l(1591),p=l(1075);function s(i,o){if(1&i){var n=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).toggleSize()}),e._UZ(1,"svg-icons",14),e.qZA()}if(2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("name",a.minimized?"collapse_left":"collapse_right")}}function _(i,o){if(1&i&&e._UZ(0,"svg-icons",14),2&i){var n=e.oxw(2).$implicit,a=e.oxw(3);e.Akn("color:"+a.getColorByIconType(n.icon)),e.Q6J("name",n.icon)}}var h=function(o,n){return{"price-monitoring__nav-item--active":o,"price-monitoring__nav-item--no-hover":n}};function m(i,o){if(1&i){var n=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){e.CHM(n);var S=e.oxw().$implicit;return e.oxw(3).selectTab(S.key)}),e.TgZ(1,"div",20),e.YNc(2,_,1,3,"svg-icons",21),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA()}if(2&i){var a=e.oxw().$implicit,g=e.oxw(3);e.Q6J("ngClass",e.WLB(7,h,g.isCurrentTab(a.key),g.minimized)),e.xp6(2),e.Q6J("ngIf",a.icon),e.xp6(2),e.Oqu(a.value),e.xp6(2),e.AsE(" ",e.lcZ(7,5,a.label),"",a.subValue," ")}}function u(i,o){if(1&i&&(e.ynx(0),e.YNc(1,m,8,10,"div",18),e.BQk()),2&i){var n=o.$implicit;e.xp6(1),e.Q6J("ngIf",n.enable)}}function d(i,o){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",20),e._UZ(2,"svg-icons",14),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()),2&i){var n=e.oxw(3);e.Gre("price-monitoring__nav-item price-monitoring__nav-item--no-hover price-monitoring__nav-item--affiliate-",n.affiliate.status,""),e.xp6(2),e.Q6J("name",n.affiliate.icon),e.xp6(2),e.hij(" ",e.lcZ(5,5,"notificationAffiliate"+n.affiliate.status)," ")}}function y(i,o){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,u,2,1,"ng-container",16),e.YNc(2,d,6,7,"div",17),e.qZA()),2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.navigations),e.xp6(1),e.Q6J("ngIf",!n.isPopupType&&n.affiliate.show)}}function f(i,o){if(1&i&&(e.TgZ(0,"div",23),e._UZ(1,"app-letyshops-logo",24),e.qZA()),2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("width",n.minimized?55:80)}}function F(i,o){if(1&i){var n=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).toSettings()}),e._UZ(1,"svg-icons",26),e.qZA()}}function L(i,o){1&i&&(e.TgZ(0,"div",27),e._UZ(1,"app-spinner",28),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("size",24),e.xp6(2),e.Oqu(e.lcZ(4,2,"tabStorePopupPriceMonitoringProceed")))}function k(i,o){1&i&&(e.TgZ(0,"div",29),e._UZ(1,"svg-icons",30),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"tabStorePopupPriceMonitoringError")," "))}function Y(i,o){1&i&&(e.TgZ(0,"div",39),e._UZ(1,"app-spinner",28),e.qZA()),2&i&&(e.xp6(1),e.Q6J("size",24))}var I=function(o){return{years:o}};function W(i,o){if(1&i&&e._UZ(0,"li",48),2&i){var n=o.$implicit,a=e.oxw(4);e.Tol(a.sellerInfo[n].status),e.Q6J("translate",a.sellerInfo[n].text)("translateParams",e.VKq(4,I,a.sellerInfo[n].textArg))}}function q(i,o){}function nt(i,o){1&i&&e.YNc(0,q,0,0,"ng-template")}function tt(i,o){if(1&i&&(e.TgZ(0,"div",40),e.TgZ(1,"div",41),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",42),e._UZ(5,"circle-progress",43),e.TgZ(6,"div",44),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"div",45),e.TgZ(10,"ul"),e.YNc(11,W,1,6,"li",46),e.qZA(),e.qZA(),e.YNc(12,nt,1,0,null,47),e.qZA()),2&i){var n=e.oxw(3),a=e.MAs(2);e.xp6(2),e.hij(" ",e.lcZ(3,8,"notificationPriceSallerInfoDescription")," "),e.xp6(3),e.Q6J("radius",n.isPopupType?24:35)("percent",n.sellerInfo.totalScore)("outerStrokeColor",n.sellerInfo.notesScore.color)("maxPercent",100),e.xp6(2),e.hij(" ",e.lcZ(8,10,n.sellerInfo.notesScore.text)," "),e.xp6(4),e.Q6J("ngForOf",n.sellerNotesKey),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function it(i,o){if(1&i&&(e.TgZ(0,"div",53),e._uU(1," Min:"),e.TgZ(2,"span",54),e._uU(3),e.qZA(),e.qZA()),2&i){var n=e.oxw(4);e.xp6(3),e.Oqu(n.priceDynamic.minPrice)}}function ot(i,o){if(1&i&&(e.TgZ(0,"div",53),e._uU(1," Max:"),e.TgZ(2,"span",55),e._uU(3),e.qZA(),e.qZA()),2&i){var n=e.oxw(4);e.xp6(3),e.Oqu(n.priceDynamic.maxPrice)}}function at(i,o){}function rt(i,o){1&i&&e.YNc(0,at,0,0,"ng-template")}function lt(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",56),e.TgZ(2,"div",57),e._uU(3),e.qZA(),e.TgZ(4,"div",58),e.TgZ(5,"div",59),e._UZ(6,"svg-icons",14),e.qZA(),e.TgZ(7,"div",60),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",61),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",62),e._UZ(14,"canvas",63),e.TgZ(15,"small"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.YNc(18,rt,1,0,null,47),e.BQk()),2&i){var n=e.oxw(4),a=e.MAs(2);e.xp6(3),e.hij(" ",n.priceDynamic.priceLast," "),e.xp6(3),e.Akn("color:"+n.getColorByIconType(n.priceDynamic.icon)),e.Q6J("name",n.priceDynamic.icon),e.xp6(3),e.hij(" ",n.priceDynamic.value," "),e.xp6(2),e.hij(" ",e.lcZ(12,11,n.priceDynamic.description)," "),e.xp6(3),e.Q6J("type","line")("options",n.chart.options)("data",n.chart),e.xp6(2),e.hij(" ",e.lcZ(17,13,"notificationPricePeriodIntervalDown")," "),e.xp6(2),e.Q6J("ngTemplateOutlet",a)}}function j(i,o){1&i&&(e.TgZ(0,"div",64),e.TgZ(1,"div",65),e.O4$(),e.TgZ(2,"svg",66),e.TgZ(3,"g",67),e._UZ(4,"circle",68),e._UZ(5,"path",69),e._UZ(6,"path",70),e._UZ(7,"path",71),e._UZ(8,"path",72),e._UZ(9,"rect",73),e._UZ(10,"rect",74),e._UZ(11,"rect",75),e._UZ(12,"rect",76),e._UZ(13,"rect",77),e.qZA(),e.TgZ(14,"defs"),e.TgZ(15,"clipPath",78),e._UZ(16,"rect",79),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA()),2&i&&(e.xp6(17),e.hij(" ",e.lcZ(18,1,"notificationPriceDynamicChartErrorTitle")," "))}function J(i,o){if(1&i&&(e.TgZ(0,"div",49),e.TgZ(1,"div",41),e._uU(2),e.ALo(3,"translate"),e.YNc(4,it,4,1,"div",50),e.YNc(5,ot,4,1,"div",50),e.qZA(),e.YNc(6,lt,19,15,"ng-container",51),e.YNc(7,j,19,3,"div",52),e.qZA()),2&i){var n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,5,"notificationPricePriceDynamicsDescription")," "),e.xp6(2),e.Q6J("ngIf",n.chart),e.xp6(1),e.Q6J("ngIf",n.chart),e.xp6(1),e.Q6J("ngIf",n.chart),e.xp6(1),e.Q6J("ngIf",!n.chart)}}function O(i,o){}function pt(i,o){1&i&&e.YNc(0,O,0,0,"ng-template")}var gt=function(o){return{$implicit:o}};function _t(i,o){if(1&i&&(e.ynx(0),e.YNc(1,pt,1,0,null,83),e.BQk()),2&i){var n=o.$implicit;e.oxw(5);var a=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(2,gt,n))}}function dt(i,o){if(1&i&&(e.TgZ(0,"div",82),e.YNc(1,_t,2,4,"ng-container",16),e.qZA()),2&i){var n=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",n.similarProducts)}}function mt(i,o){1&i&&(e.TgZ(0,"div",64),e.TgZ(1,"div",65),e.O4$(),e.TgZ(2,"svg",84),e.TgZ(3,"g",85),e._UZ(4,"ellipse",86),e._UZ(5,"path",87),e._UZ(6,"path",88),e._UZ(7,"ellipse",89),e._UZ(8,"ellipse",90),e._UZ(9,"ellipse",91),e._UZ(10,"ellipse",92),e._UZ(11,"ellipse",93),e._UZ(12,"path",94),e._UZ(13,"path",95),e._UZ(14,"path",96),e._UZ(15,"path",97),e._UZ(16,"path",98),e._UZ(17,"path",99),e._UZ(18,"path",100),e._UZ(19,"path",101),e._UZ(20,"path",102),e.qZA(),e.qZA(),e.qZA(),e._uU(21),e.ALo(22,"translate"),e.qZA()),2&i&&(e.xp6(21),e.hij(" ",e.lcZ(22,1,"notificationPriceSimilarItemsIsEmptyTitle")," "))}function ht(i,o){if(1&i&&(e.TgZ(0,"div",80),e.TgZ(1,"div",41),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,dt,2,1,"div",81),e.YNc(5,mt,23,3,"div",52),e.qZA()),2&i){var n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,3,"notificationPriceSimilarItems")," "),e.xp6(2),e.Q6J("ngIf",n.similarProducts),e.xp6(1),e.Q6J("ngIf",!n.similarProducts&&!n.process)}}function ut(i,o){if(1&i){var n=e.EpF();e.TgZ(0,"div",105),e.NdJ("click",function(){return e.CHM(n),e.oxw(4).clearHistory()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"notificationPriceHistoryItemsClear")," "))}function ft(i,o){}function vt(i,o){1&i&&e.YNc(0,ft,0,0,"ng-template")}function Ct(i,o){if(1&i&&(e.ynx(0),e.YNc(1,vt,1,0,null,83),e.BQk()),2&i){var n=o.$implicit;e.oxw(4);var a=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(2,gt,n))}}function Pt(i,o){1&i&&(e.TgZ(0,"div",64),e.TgZ(1,"div",65),e.O4$(),e.TgZ(2,"svg",106),e.TgZ(3,"g",85),e._UZ(4,"path",107),e._UZ(5,"path",108),e._UZ(6,"path",109),e._UZ(7,"circle",110),e._UZ(8,"path",111),e._UZ(9,"path",112),e._UZ(10,"path",113),e.qZA(),e.qZA(),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA()),2&i&&(e.xp6(11),e.hij(" ",e.lcZ(12,1,"notificationPriceHistoryItemsIsEmptyTitle")," "))}function yt(i,o){if(1&i&&(e.TgZ(0,"div",103),e.TgZ(1,"div",41),e._uU(2),e.ALo(3,"translate"),e.YNc(4,ut,3,3,"div",104),e.qZA(),e.TgZ(5,"div",82),e.YNc(6,Ct,2,4,"ng-container",16),e.qZA(),e.YNc(7,Pt,13,3,"div",52),e.qZA()),2&i){var n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,4,"notificationPriceHistoryItemsFull")," "),e.xp6(2),e.Q6J("ngIf",n.hasHistory),e.xp6(2),e.Q6J("ngForOf",n.history),e.xp6(1),e.Q6J("ngIf",!n.hasHistory&&!n.process)}}function Mt(i,o){if(1&i){var n=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.TgZ(2,"app-close",33),e.NdJ("hide",function(){return e.CHM(n),e.oxw(2).hide()}),e.qZA(),e.qZA(),e.YNc(3,Y,2,1,"div",34),e.YNc(4,tt,13,12,"div",35),e.YNc(5,J,8,7,"div",36),e.YNc(6,ht,6,5,"div",37),e.YNc(7,yt,8,6,"div",38),e.qZA()}if(2&i){var a=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a.process),e.xp6(1),e.Q6J("ngIf",a.isCurrentTab(a.types.SellerInfo)),e.xp6(1),e.Q6J("ngIf",a.isCurrentTab(a.types.PriceDynamic)),e.xp6(1),e.Q6J("ngIf",a.isCurrentTab(a.types.SimilarProducts)),e.xp6(1),e.Q6J("ngIf",a.isCurrentTab(a.types.History))}}var xt=function(o,n){return{"price-monitoring--minimized":o,"price-monitoring--in-popup":n}};function Ot(i,o){if(1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.YNc(2,s,2,1,"div",5),e.YNc(3,y,3,2,"div",6),e.YNc(4,f,2,1,"div",7),e.YNc(5,F,2,0,"div",8),e.YNc(6,L,5,4,"div",9),e.YNc(7,k,5,3,"div",10),e.qZA(),e.TgZ(8,"div",11),e.YNc(9,Mt,8,5,"div",12),e.qZA(),e.qZA()),2&i){var n=e.oxw();e.Q6J("ngClass",e.WLB(8,xt,n.minimized,n.isPopupType)),e.xp6(2),e.Q6J("ngIf",!n.isPopupType&&n.minimizingAllowed),e.xp6(1),e.Q6J("ngIf",n.navigations&&(!n.proceed||!n.isPopupType)),e.xp6(1),e.Q6J("ngIf",!n.isPopupType),e.xp6(1),e.Q6J("ngIf",!n.isPopupType),e.xp6(1),e.Q6J("ngIf",n.isPopupType&&n.proceed),e.xp6(1),e.Q6J("ngIf",n.isPopupType&&n.data&&n.data.empty),e.xp6(2),e.Q6J("ngIf",n.selectedTab)}}function bt(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"notificationPriceButtonWrapperActivateText")," "))}function kt(i,o){1&i&&(e.TgZ(0,"span",117),e._UZ(1,"svg-icons",118),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"notificationPriceButtonWrapperText")," "))}var Tt=function(o){return{"activation-btn--no-hover":o}};function At(i,o){if(1&i){var n=e.EpF();e.TgZ(0,"app-button",115),e.NdJ("onClick",function(){return e.CHM(n),e.oxw(2).activateCashback()}),e.YNc(1,bt,3,3,"span",51),e.YNc(2,kt,4,3,"span",116),e.qZA()}if(2&i){var a=e.oxw(2);e.Q6J("variant",a.isActivated?"green":"blue")("fullWidth",!0)("ngClass",e.VKq(5,Tt,a.isActivated)),e.xp6(1),e.Q6J("ngIf",!a.isActivated),e.xp6(1),e.Q6J("ngIf",a.isActivated)}}function It(i,o){if(1&i&&e.YNc(0,At,3,7,"app-button",114),2&i){var n=e.oxw();e.Q6J("ngIf",n.allowActivation&&!n.isPopupType)}}function Zt(i,o){if(1&i&&(e.TgZ(0,"div",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,"notificationPriceHistoryItemsOrders"),": ",n.orders," ")}}function wt(i,o){if(1&i&&(e.TgZ(0,"div",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,"notificationPriceHistoryItemsReviews"),": ",n.reviews," ")}}function Et(i,o){if(1&i&&(e.TgZ(0,"div",129),e._UZ(1,"svg-icons",14),e._uU(2),e.qZA()),2&i){var n=e.oxw(2).$implicit,a=e.oxw();e.xp6(1),e.Akn("color:"+a.getColorByIconType(n.sellerResumeStatusItem.icon)),e.Q6J("name",n.sellerResumeStatusItem.icon),e.xp6(1),e.hij(" ",n.sellerResumeStatusItem.value,"% ")}}function Dt(i,o){if(1&i&&(e.TgZ(0,"div",129),e._UZ(1,"svg-icons",14),e._uU(2),e.qZA()),2&i){var n=e.oxw(2).$implicit,a=e.oxw();e.xp6(1),e.Akn("color:"+a.getColorByIconType(n.priceDynamicItem.icon)),e.Q6J("name",n.priceDynamicItem.icon),e.xp6(1),e.hij(" ",n.priceDynamicItem.value," ")}}function ct(i,o){if(1&i&&(e.TgZ(0,"div",127),e.YNc(1,Et,3,4,"div",128),e.YNc(2,Dt,3,4,"div",128),e.qZA()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.sellerResumeStatusItem),e.xp6(1),e.Q6J("ngIf",n.priceDynamicItem)}}function St(i,o){if(1&i&&(e.TgZ(0,"a",119),e.TgZ(1,"div",120),e._UZ(2,"img",121),e.ALo(3,"priceMonitoringImageUrl"),e.qZA(),e.TgZ(4,"div",122),e.TgZ(5,"div",123),e._uU(6),e.qZA(),e.YNc(7,Zt,3,4,"div",124),e.YNc(8,wt,3,4,"div",124),e.YNc(9,ct,3,2,"div",125),e.qZA(),e.qZA()),2&i){var n=o.$implicit;e.Q6J("href",n.productDetailUrl,e.LSH),e.xp6(2),e.Q6J("src",e.lcZ(3,7,n.productImage),e.LSH)("alt",n.productTitle),e.xp6(4),e.hij(" ",n.minPrice," "),e.xp6(1),e.Q6J("ngIf",n.orders),e.xp6(1),e.Q6J("ngIf",n.reviews),e.xp6(1),e.Q6J("ngIf",n.sellerResumeStatusItem||n.priceDynamicItem)}}var K=function(){function i(o,n,a,g,v,S,b,$,X,et){(0,Q.Z)(this,i),this.eRef=o,this.sanitizer=n,this.priceMonitoringServices=a,this.eventService=g,this.externalNavigationService=v,this.priceMonitoringSellerInfoPipe=S,this.priceMonitoringPriceInfoPipe=b,this.translateService=$,this.document=X,this.apiClientService=et,this.type="injection",this.visible=new e.vpe,this.types=B,this.sellerNotesKey=["notesFeedback","notesAge","notesDescription","notesCommunication","notesShipping"]}return(0,G.Z)(i,[{key:"onScroll",value:function(){!this.selectedTab&&!this.touched&&this.minimizingAllowed&&(this.minimized=window.scrollY>100)}},{key:"close",value:function(n){var a=n.path||n.composedPath&&n.composedPath();n&&!this.eRef.nativeElement.contains(a[0])&&(this.selectedTab=null)}},{key:"ngOnInit",value:function(){var n=this;this.proceed=!0;var a=this.data,g=a.history,v=a.merchant,S=a.affiliate,b=a.rawData,$=a.pageData,X=a.user,et=a.hasSellerInfo,Lt=a.empty;try{if(!Lt&&(this.rawData=b,this.pageData=$,this.priceDynamic=this.priceMonitoringPriceInfoPipe.transform(b),et&&(this.sellerInfo=this.priceMonitoringSellerInfoPipe.transform(b),this.history=g),this.merchant=v,this.affiliate=S,this.user=X,this.initNavigationItems(),(this.sellerInfo||this.priceDynamic)&&(this.isPopupType||(this.document.querySelector("body").style.paddingTop="80px"),this.visible.emit(!0),!this.isPopupType))){var Ut=v?v.title:window.location.host;this.eventService.fireEvent(A.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"pageview",page:"".concat(w.g.gaPrefixMonitor,"show/").concat(Ut,"/")}})}setTimeout(function(){return n.proceed=!1},1e3)}catch(Nt){throw setTimeout(function(){return n.proceed=!1},1e3),Error(Nt)}}},{key:"isActivated",get:function(){return this.merchant.isActivated}},{key:"allowActivation",get:function(){return this.merchant.settings.partnerList}},{key:"minimizingAllowed",get:function(){return this.navigations.filter(function(n){return n.enable}).length>1&&!this.isPopupType}},{key:"hasHistory",get:function(){return!(!this.history||!this.history.length)}},{key:"isPopupType",get:function(){return"popup"===this.type}},{key:"initNavigationItems",value:function(){this.navigations=[{label:"notificationPriceSallerInfoDescription",icon:this.sellerInfo&&this.sellerInfo.icon,enable:!!this.sellerInfo,key:B.SellerInfo,value:this.sellerInfo&&this.sellerInfo.totalScore+"%"},{label:"notificationPricePriceDynamicsDescription",icon:this.priceDynamic&&this.priceDynamic.icon,enable:!!this.priceDynamic,key:B.PriceDynamic,value:this.priceDynamic&&this.priceDynamic.value},{label:"notificationPriceSimilarItems",icon:"copy",enable:P.cQ.isAliexpress(this.merchant.id),key:B.SimilarProducts,value:""},{label:"notificationPriceHistoryItems",icon:"history",enable:P.cQ.isAliexpress(this.merchant.id),key:B.History,value:""}]}},{key:"selectTab",value:function(n){var a=this;switch(n){case this.selectedTab:return this.scrollToTab("price-monitoring"),void this.hide();case B.PriceDynamic:if(this.chart){this.selectedTab=n,this.scrollToTab("price-monitoring__content-wrapper");break}this.eventService.fireEvent(A.P.PRICE_MONITORING_GET_CHART_DATA,{data:{targetInfo:this.rawData.targetInfo,pageData:this.pageData,user:this.user}}).then(function(g){if(g){var v=g.minPrice,S=g.maxPrice,b=g.chart,$=g.priceLast,X=g.description;a.chart=b,a.setTooltipsContent(),a.priceDynamic.minPrice=v,a.priceDynamic.maxPrice=S,a.priceDynamic.priceLast=$,a.priceDynamic.description=X}a.selectedTab=n,a.scrollToTab("price-monitoring__content-wrapper")});break;case B.SimilarProducts:this.selectedTab=n,this.scrollToTab("price-monitoring__content-wrapper"),this.similarProducts||(this.process=!0,this.eventService.fireEvent(A.P.PRICE_MONITORING_GET_SIMILAR_PRODUCTS,{data:{url:this.pageData.href,aliRunParams:this.pageData.aliRunParams,rawData:this.rawData,pageData:this.pageData,merchant:this.merchant}}).then(function(g){a.process=!1,g&&(a.similarProducts=g,a.navigations.forEach(function(v){v.key===B.SimilarProducts&&(v.subValue=": ".concat(g.length))}))}));break;default:this.selectedTab=n,this.scrollToTab("price-monitoring__content-wrapper")}this.minimized=!1,this.eventService.fireEvent(A.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:this.isPopupType?"Price Monitoring":"Monitor",action:this.isPopupType?"Toggle ".concat(n," info popup"):"Click bar ".concat(n),label:this.isPopupType?"Show":"Click bar ".concat(n)}})}},{key:"scrollToTab",value:function(n){this.isPopupType&&setTimeout(function(){document.getElementsByClassName(n)[0].scrollIntoView({block:"start",behavior:"smooth"})},100)}},{key:"isCurrentTab",value:function(n){return this.selectedTab===n}},{key:"hide",value:function(){this.selectedTab=null,this.scrollToTab("price-monitoring")}},{key:"toggleSize",value:function(){this.touched=!0,this.minimized=!this.minimized;var n=this.merchant?this.merchant.title:window.location.host,a=this.minimized?"large-view/":"small-view/";this.isPopupType||this.eventService.fireEvent(A.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"pageview",page:"".concat(w.g.gaPrefixMonitor+a+n,"/")}})}},{key:"clearHistory",value:function(){var n=this;this.eventService.fireEvent(A.P.PRICE_MONITORING_CLEAR_HISTORY).then(function(){n.history=null})}},{key:"activateCashback",value:function(){if(!this.isActivated){var n=this.merchant.isSuppressed?"notification_get_cashback_cart":"notification_get_cashback",a=encodeURIComponent(window.location.origin)+encodeURIComponent(window.location.pathname),g=this.apiClientService.link+this.merchant.activateUrl+w.g.PARAMETER_DEEP_LINK+a,v=this.externalNavigationService.buildQueryString({utm_source:"extension",utm_campaign:n,utm_term:P.cQ.getFullInfo().browser.toLowerCase()});this.externalNavigationService.navigate(this.externalNavigationService.buildUrl(g,v),x.m.CURRENTTAB),this.eventService.fireEvent(A.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Monitor",action:"Click activate cashback popup",label:this.merchant.title}})}}},{key:"toSettings",value:function(){chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():P.cQ.isBrowser(w.g.BROWSER_NAME_FF)?this.externalNavigationService.navigate(chrome.runtime.getURL("options/options.html")):this.externalNavigationService.navigate("chrome://extensions/?options=".concat(chrome.runtime.id)),this.eventService.fireEvent(A.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Monitor",action:"Click on Setting",label:"Setting"}})}},{key:"setTooltipsContent",value:function(){var n=this;this.chart.options.plugins.tooltip.callbacks={title:function(g){var v=parseFloat(g[0].parsed.y.toFixed(2)).toLocaleString("en").replace(/,/g," ");return"\u20bd"===n.chart.signPrice?"".concat(v," \u0440\u0443\u0431."):"".concat(n.chart.signPrice).concat(v)},label:function(g){return g.label}}}},{key:"getColorByIconType",value:function(n){switch(n){case"dynamic_no_changes":return"#1EB1FC";case"dynamic_low_down":case"dynamic_down":case"dynamic_down_after_up":case"smile_good":return"#00C853";case"dynamic_up_after_down":case"dynamic_up":case"dynamic_low_up":case"smile_bad":return"#F44336";case"smile_stranger":return"#FA0";default:return"#000"}}}]),i}();K.\u0275fac=function(o){return new(o||K)(e.Y36(e.SBq),e.Y36(R.H7),e.Y36(T.r),e.Y36(A.P),e.Y36(x.m),e.Y36(M.R),e.Y36(Z.R),e.Y36(E.sK),e.Y36(c.K0),e.Y36(D.O))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-price-monitoring"]],hostBindings:function(o,n){1&o&&e.NdJ("scroll",function(g){return n.onScroll(g)},!1,e.Jf7)("click",function(g){return n.close(g)},!1,e.evT)},inputs:{data:"data",type:"type"},outputs:{visible:"visible"},decls:5,vars:1,consts:[["class","price-monitoring",3,"ngClass",4,"ngIf"],["activation",""],["product",""],[1,"price-monitoring",3,"ngClass"],[1,"price-monitoring__top"],["class","price-monitoring__trigger",3,"click",4,"ngIf"],["class","price-monitoring__nav",4,"ngIf"],["class","price-monitoring__logo",4,"ngIf"],["class","price-monitoring__settings",3,"click",4,"ngIf"],["class","price-monitoring__progress",4,"ngIf"],["class","price-monitoring__empty",4,"ngIf"],[1,"price-monitoring__content-wrapper"],["class","price-monitoring__container",4,"ngIf"],[1,"price-monitoring__trigger",3,"click"],[1,"icon",3,"name"],[1,"price-monitoring__nav"],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],["class","price-monitoring__nav-item",3,"ngClass","click",4,"ngIf"],[1,"price-monitoring__nav-item",3,"ngClass","click"],[1,"top"],["class","icon",3,"name","style",4,"ngIf"],[1,"label"],[1,"price-monitoring__logo"],[1,"logo",3,"width"],[1,"price-monitoring__settings",3,"click"],["name","settings",1,"icon"],[1,"price-monitoring__progress"],["stroke","#1EB1FCFF",3,"size"],[1,"price-monitoring__empty"],["name","smile_default",1,"icon"],[1,"price-monitoring__container"],[1,"price-monitoring__close"],[3,"hide"],["class","process",4,"ngIf"],["class","seller-info",4,"ngIf"],["class","price-dynamic-info",4,"ngIf"],["class","similar-products-info",4,"ngIf"],["class","history-info",4,"ngIf"],[1,"process"],[1,"seller-info"],[1,"price-monitoring__container-title"],[1,"seller-info__info"],[3,"radius","percent","outerStrokeColor","maxPercent"],[1,"text"],[1,"seller-info__list"],[3,"class","translate","translateParams",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[3,"translate","translateParams"],[1,"price-dynamic-info"],["class","meta",4,"ngIf"],[4,"ngIf"],["class","empty-list",4,"ngIf"],[1,"meta"],[1,"green"],[1,"red"],[1,"price-dynamic-info__header"],[1,"price-dynamic-info__price"],[1,"price-dynamic-info__dynamic-value"],[1,"price-dynamic-info__dynamic-value-img"],[1,"price-dynamic-info__dynamic-value-num"],[1,"price-dynamic-info__dynamic-description"],[1,"price-dynamic-info__chart"],["baseChart","","width","100","height","45",3,"type","options","data"],[1,"empty-list"],[1,"empty-list__img"],["width","104","height","112","viewBox","0 0 104 112","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0)"],["cx","52","cy","60","r","52","fill","white"],["d","M2 55.5714H29.8571L54.5 22.7143L80.25 21.6429L104 0","stroke","#EEEEEE","stroke-width","3","stroke-linecap","round"],["fill-rule","evenodd","clip-rule","evenodd","d","M81.5 25C83.9853 25 86 22.9853 86 20.5C86 18.0147 83.9853 16 81.5 16C79.0147 16 77 18.0147 77 20.5C77 22.9853 79.0147 25 81.5 25Z","fill","#F3AF3D"],["fill-rule","evenodd","clip-rule","evenodd","d","M55.5 27C57.9853 27 60 24.9853 60 22.5C60 20.0147 57.9853 18 55.5 18C53.0147 18 51 20.0147 51 22.5C51 24.9853 53.0147 27 55.5 27Z","fill","#F3AF3D"],["fill-rule","evenodd","clip-rule","evenodd","d","M29.5 60C31.9853 60 34 57.9853 34 55.5C34 53.0147 31.9853 51 29.5 51C27.0147 51 25 53.0147 25 55.5C25 57.9853 27.0147 60 29.5 60Z","fill","#F3AF3D"],["y","95","width","16","height","17","fill","#EEEEEE"],["x","22","y","70","width","16","height","42","fill","#FFD839"],["x","44","y","80","width","16","height","32","fill","#EEEEEE"],["x","88","y","35","width","16","height","77","fill","#EEEEEE"],["x","66","y","55","width","16","height","57","fill","#FFD839"],["id","clip0"],["width","104","height","112","fill","white"],[1,"similar-products-info"],["class","products-grid",4,"ngIf"],[1,"products-grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["viewBox","0 0 214 149","width","150","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd"],["fill","#F4F4F4","fill-rule","nonzero","cx","113","cy","138.211","rx","101","ry","8.5"],["d","M104.136 129.71c37.76 0 74.412 8.017 92.836 6.45 10.95-.93 13.751-8.14 11.21-14.494-6.43-16.072-14.182-7.23-24.695-12.28C172.974 104.333 194 77.527 173 70.096c-8.968-3.173-17.827 2.28-24.236 0-9.897-3.52 6.42-35.51-20.414-35.51-25.35 0-15.895 25.017-28.537 27.907-8.106 1.854-14.244-1.783-19.183-1.783-5.81 0-7.718 23.032-24 26.395-23.671 4.89-44.477-3.515-49.651 22.28-7.77 38.728 36.958 20.325 97.157 20.325z","fill","#EDEDED","fill-rule","nonzero","data-spm-anchor-id","a2g0o.detail.0.i9.4e4135b18CXQV1"],["d","M127.508 138.71c8.793 0 33.344-2.077 39.553-7.352 4.672-3.97-17.52-11.27-17.52-13.65 0-3.969 19.959-7.608 19.959-14.497 0-6.89-20.545 3.03-22.293-1.164-1.344-3.226 11.212-16.877 7.827-21.33-6.822-8.97-16.392 9.836-20.742 7.6-4.876-2.507-.92-20.606-6.784-20.606-3.857 0-6.056 24.765-9.534 25.897-5.366 1.748-11.685-19.419-15.59-15.532-2.96 2.945-2.96 20.926 3.861 30.043 11.507 15.382 1.614 30.592 21.263 30.592z","fill","#FFF","fill-rule","nonzero"],["fill","#DFDFDF","fill-rule","nonzero","cx","13.5","cy","131.211","rx","13.5","ry","7.5"],["fill","#DFDFDF","fill-rule","nonzero","cx","24","cy","136.711","rx","11","ry","5"],["fill","#EDEDED","fill-rule","nonzero","cx","15","cy","139.711","rx","7","ry","5"],["fill","#EDEDED","fill-rule","nonzero","cx","174.5","cy","142.711","rx","9.5","ry","6"],["fill","#DFDFDF","fill-rule","nonzero","cx","184","cy","135.211","rx","5","ry","3.5"],["d","M120.005 139.013c6.783.691 14.71 1.988 21.826 2.166 11.514.288 22.169-1.42 22.169-3.468 0-3.314-19.252-6-43-6s-39.778 1.411-39.778 4.725c0 3.313 13.742.025 38.783 2.577z","fill","#A0A0A0"],["d","M75.06 60.71c7.179 0 7.83 5.069 10.08 15.983 1.144 5.54 5.389 13.187 16.699 23.075 6.785 5.932 15.996 5.932 25.25 14.296 13.628 12.319 22.179 19.724 24.03 26.921-2.883.198-6.052.275-9.288.194-7.116-.178-15.043-1.475-21.826-2.166-9.618-.98-17.57-1.099-23.716-1.061-3.708-2.449-7.444-5.434-11.148-9.044C77.198 121.166 59 88.77 59 80.21c0-8.56 8.88-19.5 16.06-19.5z","fill","#FC0","fill-rule","nonzero"],["d","M69.8 98.088c4.022-2.922 3.136 6.914 12.255 18.867 9.12 11.953 17.042 12.999 13.02 15.92-1.276.928-3.045 1.015-5.088.395a80.806 80.806 0 01-4.846-4.362c-4.27-4.162-11.505-15.45-17.282-26.33.082-2.025.711-3.596 1.942-4.49z","fill","#ECBD00"],["d","M85.14 76.693c1.144 5.54 5.389 13.187 16.699 23.075 6.785 5.932 15.996 5.932 25.25 14.296l1.903 1.72c-2.083 1.818-6.45 1.35-11.992-.248-4.418-1.273-11.252-6.335-15.922-9.124-5.253-3.136-15.507 0-20.268-6.805-2.25-3.218-2.867-8.812-1.81-12.896 1.536-5.936-1.415-16.203 4.073-19.174.719 2.393 1.3 5.435 2.068 9.156z","fill","#FFAB00","fill-rule","nonzero"],["d","M89.727 128.398c1.487-1.279 17.794-.643 23.262 1.614 5.17 2.134 7.28 6.417 7.28 8.699l.002.33-.266-.028c-14.61-1.49-25.375-.99-31.807-.974a8.517 8.517 0 01-.197-1.828c0-2.579-.087-6.254 1.726-7.813z","fill","#FC0","fill-rule","nonzero"],["d","M60.95 131.594c-1.408-2.232-19.816-20.037-17.67-20.764 9.027-3.055-3.603-7.36-4.566-2.725-1.278 6.147 2.008 10.498 7.421 17.07 5.41 6.57 1.297 10.592 4.305 10.428 1.312-.072 1.57-.35 4.109-.072 1.106.122.335 1.372 1.642 1.538 4.426.56 11.447.119 13.039-.228 2.126-.464-4.646-4.09-5.318-4.743-.561-.546-2.283.573-2.963-.504z","fill","#FFAB00"],["d","M71.163 132.48c-1.368-2.256-19.463-20.38-17.303-21.07 9.078-2.896 31.403-14.7 30.41-37.2-.548-12.404-10.074-22.5-22.5-22.5-12.427 0-22.5 10.074-22.5 22.5 0 9.921 7.518 16.625 6.094 24.332-1.279 6.927-7.45 6.74-8.494 11.358-1.385 6.123 10.718 9.88 16.015 16.546 5.295 6.662 5.006 9.859 7.7 9.859 1.185 0 1.578-.323 4.11 0 1.105.14.311 1.377 1.616 1.565 4.415.638 11.443.32 13.04 0 2.135-.426-4.574-4.17-5.234-4.835-.552-.556-2.293.533-2.954-.556z","fill","#FC0"],["d","M47.295 56.985c4.528.77 7.034 3.327 7.034 9.726 0 1.955-1.981 7.154-2.586 8.856-1.872 5.27-3.025 10.144-8.243 10.144-.452 0-.9-.028-1.339-.083-1.483-3.432-2.891-7.123-2.891-11.417 0-6.835 3.047-12.958 7.857-17.084z","fill","#FFAB00","fill-rule","nonzero"],["d","M27.761 32.058c.988 2.328 2.549 3.075 4.682 2.241-1.21 6.563-.884 12.518 3.657 13.836.842.244 1.889-.317 3.14-1.682 1.087 4.232 9.648 8.19 12.38 9.403 2.73 1.214 6.273-3.294 7.45-3.378 2.5-.179-7.405-1.79-12.29-10.411-3.373-5.955-3.449-18.384.925-23.204C58.41 7.067 66.225 11.967 68.937 8.72c2.593-3.107-7.111-6.74-14.864-8.363-7.075-1.48-15.486 2.032-17.973 3.637-4.597 2.967-7.86 8.535-7.86 10.218 0 2.286 1.092 3.355 3.275 3.208-.51 1.444-6.62 7.885-3.754 14.64z","fill","#FC0","fill-rule","nonzero"],[1,"history-info"],["class","history-info__clear",3,"click",4,"ngIf"],[1,"history-info__clear",3,"click"],["viewBox","0 0 178 146","width","127","xmlns","http://www.w3.org/2000/svg"],["d","M111.609 12.657l-1.037-.054 1.26-.05c17.076-.596 28.071 2.768 32.986 10.09.729 1.086 2.75 1.518 6.066 1.298 1.079.247 2.102.547 3.122.955a19.206 19.206 0 0111.733 21.49l-3.543 17.516-7.793 35.161-6.66 31.143c-2.163 10.21-12.196 16.806-22.44 14.778l-.335-.069-6.778-1.446-53.41-11.495-49.571-10.607a20.809 20.809 0 01-3.122-.954A19.177 19.177 0 01.354 98.923l.072-.358 3.471-16.158 7.75-36.141 6.648-31.111c1.056-5.01 4.048-9.315 8.344-12.089C30.84.386 35.793-.579 40.67.337l.443.088 6.778 1.447 48.66 10.44-1.923.015c-15.842.162-34.783 1.482-56.825 3.959a2.585 2.585 0 00-1.825.302l-.094.06c-.42.25-.933.758-1.13 1.6-11.627 4.797-18.142 10.465-19.545 17.003-1.497 6.975.669 21.578 6.496 43.81l.005 1.245c.16 20.148 4.78 31.095 13.86 32.842 8.987 1.729 26.844-4.69 53.57-19.256l2.506-1.375 20.964-13.59c2.408-1.543 5.619-.925 7.245 1.391l.132.197 16.041 24.9.783-.962c6.276-7.775 9.846-13.672 10.71-17.69 2.091-9.738 2.746-24.4 1.965-43.987.32-1.383-.548-2.504-1.535-2.9-.13-.047-.29-.106-.43-.12l-.397-1.15c-5.087-14.585-10.083-22.402-14.99-23.451-5.767-1.234-12.608-2.067-20.525-2.498z","fill","#DFDFDF","fill-rule","nonzero"],["fill","#FFF","fill-rule","nonzero","d","M12 27l126.658-14.42L147 110l-124.515 1.802z"],["d","M131.847 1.491l.547.009a19.206 19.206 0 0118.429 16.542l2.265 16.37 5.045 36.647 4.393 31.543c1.476 10.446-5.869 20.172-16.37 21.61l-6.864.96-54.121 7.466-50.21 6.987a20.809 20.809 0 01-3.26.171 19.178 19.178 0 01-18.429-16.542l-2.265-16.371-5.08-36.612-4.392-31.509c-.72-5.068.618-10.137 3.706-14.213 3.123-4.075 7.62-6.713 12.699-7.432l6.863-.959 54.122-7.5 50.208-6.987a20.809 20.809 0 013.26-.171zm-.02 16.157c-.137 0-.309 0-.446.034L20.254 33.152a2.567 2.567 0 00-1.68.998c-.309.378-.618 1.031-.515 1.89l8.538 61.608 27.808-36.854c1.783-2.338 5.143-2.82 7.474-1.032l35.043 26.61 15.052-19.94c1.783-2.338 5.143-2.82 7.475-1.032l23.59 17.912-8.778-63.464c-.171-1.41-1.371-2.166-2.434-2.2z","fill","#EDEDED","fill-rule","nonzero"],["fill","#FFAB00","fill-rule","nonzero","cx","94.539","cy","45.148","r","12.5"],["d","M121.466 61.111c19.028-.997 35.261 13.62 36.259 32.647a34.355 34.355 0 01-5.56 20.663l-.308.464-.154.223 21.873 19.695a4.5 4.5 0 01.624 5.998l-.14.181-.15.176a4.5 4.5 0 01-6.18.484l-.176-.15-21.874-19.696-.205.177a34.34 34.34 0 01-19.286 7.968l-.569.043-.543.033c-19.027.997-35.26-13.62-36.258-32.647-.997-19.028 13.62-35.262 32.647-36.259zm.471 8.988c-14.064.737-24.867 12.736-24.13 26.8.737 14.064 12.735 24.867 26.8 24.13 14.063-.737 24.867-12.736 24.13-26.8C148 80.165 136 69.362 121.937 70.1z","fill","#DFDFDF","fill-rule","nonzero"],["d","M122.343 61.743c19.273-1.01 35.712 13.728 36.717 32.919.393 7.484-2.72 13.42-6.735 19.53l-.313.469-.155.224-6.579 3.585-.208.178c-3.651 3.063-9.766 5.48-18.345 7.252-20.703-3.008-30.686-13.745-32.186-28.252-1.5-14.508 8.531-34.895 27.804-35.905zm.335 8.94c-14.34.752-25.355 12.986-24.603 27.326.751 14.34 12.985 25.355 27.325 24.603 14.34-.751 25.355-12.985 24.603-27.325-.751-14.34-12.985-25.355-27.325-24.603z","fill","#A0A0A0"],["d","M127.54 58.648c19.053 0 34.5 15.446 34.5 34.5 0 7.43-2.36 14.501-6.634 20.344l-.333.447-.165.214 20.813 20.813a4.5 4.5 0 01.309 6.022l-.15.174-.159.168a4.5 4.5 0 01-6.196.16l-.168-.16-20.813-20.813-.214.165a34.34 34.34 0 01-19.677 6.948l-.57.014-.544.004c-19.054 0-34.5-15.446-34.5-34.5 0-19.054 15.446-34.5 34.5-34.5zm0 9c-14.084 0-25.5 11.417-25.5 25.5s11.416 25.5 25.5 25.5c14.082 0 25.5-11.417 25.5-25.5s-11.418-25.5-25.5-25.5z","fill","#FC0","fill-rule","nonzero"],["class","activation-btn",3,"variant","fullWidth","ngClass","onClick",4,"ngIf"],[1,"activation-btn",3,"variant","fullWidth","ngClass","onClick"],["class","activated-line",4,"ngIf"],[1,"activated-line"],["name","check",1,"icon"],["target","_blank",1,"product-item",3,"href"],[1,"product-item__img"],[3,"src","alt"],[1,"product-item__content"],[1,"product-item__price"],["class","product-item__details",4,"ngIf"],["class","product-item__details product-item__details--seller-price",4,"ngIf"],[1,"product-item__details"],[1,"product-item__details","product-item__details--seller-price"],["class","meta-chunk",4,"ngIf"],[1,"meta-chunk"]],template:function(o,n){1&o&&(e.YNc(0,Ot,10,11,"div",0),e.YNc(1,It,1,1,"ng-template",null,1,e.W1O),e.YNc(3,St,10,9,"ng-template",null,2,e.W1O)),2&o&&e.Q6J("ngIf",n.navigations||n.isPopupType&&n.data)},directives:[c.O5,c.mk,U.TI,c.sg,H.V,N.O,z.f,C.nu,E.Pi,c.tP,t.jh,r.r],pipes:[E.X$,p.p],styles:['[_nghost-%COMP%]{font-family:Open Sans,sans-serif;color:#121212}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Open Sans,sans-serif}.price-monitoring[_ngcontent-%COMP%]{position:fixed;top:10px;right:10px;z-index:2147483647;display:flex;flex-direction:column}.price-monitoring__top[_ngcontent-%COMP%]{box-shadow:#0000001f 0 4px 16px;display:flex;align-items:center;position:relative;margin-left:auto;min-height:56px}.price-monitoring__settings[_ngcontent-%COMP%]{position:absolute;top:3px;right:4px;color:#a0a0a0;cursor:pointer;opacity:.6}.price-monitoring__settings[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:14px;height:14px;display:block}.price-monitoring__settings[_ngcontent-%COMP%]:hover{opacity:1}.price-monitoring__trigger[_ngcontent-%COMP%]{width:16px;height:40px;cursor:pointer;display:flex;align-items:center;border-radius:2px 0 0 2px;background:#eeeeee;position:absolute;top:50%;transform:translateY(-50%);transition:all .2s ease;left:-16px}.price-monitoring__trigger[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#a0a0a0;display:block}.price-monitoring__trigger[_ngcontent-%COMP%]:hover{padding-right:5px;width:21px;left:-21px}.price-monitoring__nav[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.price-monitoring__nav-item[_ngcontent-%COMP%]{background:#fff;padding:0 24px;height:56px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-right:1px solid #EEEEEEFF;position:relative}.price-monitoring__nav-item[_ngcontent-%COMP%]:first-child{border-radius:4px 0 0 4px}.price-monitoring__nav-item[_ngcontent-%COMP%]:last-child{border-right:none}.price-monitoring__nav-item[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;margin-bottom:4px;white-space:nowrap}.price-monitoring__nav-item[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;margin:0 6px 0 0;height:16px;width:16px}.price-monitoring__nav-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:10px;line-height:14px;display:flex;align-items:center;justify-content:center}.price-monitoring__nav-item[_ngcontent-%COMP%]:after{content:"";left:10%;right:10%;bottom:-5px;height:5px;border-radius:0 0 3px 3px;background:#1EB1FCFF;display:block;width:80%;position:absolute;opacity:0;transition:all .2s ease}.price-monitoring__nav-item[_ngcontent-%COMP%]:hover, .price-monitoring__nav-item--active[_ngcontent-%COMP%]{cursor:pointer}.price-monitoring__nav-item[_ngcontent-%COMP%]:hover:after, .price-monitoring__nav-item--active[_ngcontent-%COMP%]:after{opacity:1}.price-monitoring__nav-item--no-hover[_ngcontent-%COMP%]:after{display:none}.price-monitoring__nav-item--affiliate-failur[_ngcontent-%COMP%], .price-monitoring__nav-item--affiliate-unknown[_ngcontent-%COMP%]{background:#FEECEB}.price-monitoring__nav-item--affiliate-failur[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .price-monitoring__nav-item--affiliate-unknown[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#f44336}.price-monitoring__nav-item--affiliate-pending[_ngcontent-%COMP%]{background:#E6F6FF}.price-monitoring__nav-item--affiliate-pending[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#00a8ff}.price-monitoring__nav-item--affiliate-success[_ngcontent-%COMP%]{background:#E6FAEE}.price-monitoring__nav-item--affiliate-success[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#00c853}.price-monitoring__logo[_ngcontent-%COMP%]{order:10;display:inline-flex;align-items:center;background:#FAFAFAFF;padding:0 16px;height:56px;border-radius:0 4px 4px 0}.price-monitoring__progress[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:#fff;display:flex;align-items:center;justify-content:center;border-radius:4px;font-size:12px}.price-monitoring__progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px}.price-monitoring__empty[_ngcontent-%COMP%]{background:#fff;display:flex;align-items:center;border-radius:4px;height:56px;width:100%;padding:12px 16px;color:#656565;font-size:12px}.price-monitoring__empty[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;width:24px;height:24px;margin-right:12px;color:#9e9e9e}.price-monitoring__container[_ngcontent-%COMP%]{margin-top:8px;background:#fff;padding:16px;box-shadow:#0000001f 0 4px 16px;border-radius:2px;width:550px;min-height:320px;max-height:460px;position:relative;margin-left:auto}.price-monitoring__container[_ngcontent-%COMP%]   .process[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%) translateY(-40%)}.price-monitoring__container[_ngcontent-%COMP%]   .activation-btn[_ngcontent-%COMP%]{display:block;margin-top:16px}.price-monitoring__container[_ngcontent-%COMP%]   .activation-btn--no-hover[_ngcontent-%COMP%]{pointer-events:none}.price-monitoring__container-title[_ngcontent-%COMP%]{max-width:80%;font-weight:700;font-size:16px;margin-bottom:16px;display:flex;white-space:nowrap}.price-monitoring[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:block}.price-monitoring[_ngcontent-%COMP%]   .seller-info__info[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;margin-bottom:24px;font-family:Open Sans,sans-serif}.price-monitoring[_ngcontent-%COMP%]   .seller-info__info[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:24px;font-size:12px;line-height:1.5}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]{padding-top:24px;margin:0 0 6px;border-top:1px solid #ededed;font-family:Open Sans,sans-serif}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:8px 0 0}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:10px 0;padding-left:24px;position:relative;font-size:13px;color:#212121}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{display:block;content:"";width:16px;height:16px;position:absolute;left:0;top:0;border-radius:50%;opacity:.2}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{display:block;content:"";width:4px;height:4px;position:absolute;left:6px;top:6px;border-radius:50%}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.stranger[_ngcontent-%COMP%]:before, .price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.stranger[_ngcontent-%COMP%]:after{background:#fc0}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.good[_ngcontent-%COMP%]:before, .price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.good[_ngcontent-%COMP%]:after{background:#00c853}.price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.bad[_ngcontent-%COMP%]:before, .price-monitoring[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.bad[_ngcontent-%COMP%]:after{background:#f44336}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin-left:24px;font-size:12px;font-weight:400}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:nth-child(1){margin-left:48px}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;font-weight:700}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#00c853}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{color:#f44336}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 24px;background:#fafafa;border-radius:2px;margin-bottom:12px;font-size:12px;line-height:20px}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__price[_ngcontent-%COMP%]{font-weight:700;font-size:16px;white-space:nowrap}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__dynamic-value[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin:0 16px 0 24px;font-weight:700;white-space:nowrap}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__dynamic-value-img[_ngcontent-%COMP%]{margin-right:4px}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__dynamic-value-img[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:20px;height:20px;display:block}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__dynamic-description[_ngcontent-%COMP%]{line-height:14px}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__chart[_ngcontent-%COMP%]{width:100%;background:#fafafa;padding:16px 16px 16px 12px;border-radius:4px;margin:8px 0 0}.price-monitoring[_ngcontent-%COMP%]   .price-dynamic-info__chart[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{text-align:center;font-size:10px;display:block;opacity:.7}.price-monitoring[_ngcontent-%COMP%]   .similar-products-info[_ngcontent-%COMP%], .price-monitoring[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]{padding:0 10px;margin:0 -10px;overflow:hidden;height:100%}.price-monitoring[_ngcontent-%COMP%]   .history-info__clear[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;color:#00a8ff;display:inline-block;font-size:12px;border-bottom:1px dashed #00a8ff;margin:2px 0 2px 24px}.price-monitoring[_ngcontent-%COMP%]   .history-info__clear[_ngcontent-%COMP%]:hover{border-color:transparent}.price-monitoring[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:stretch;overflow:auto;max-height:370px;margin:-4px -4px 0}.price-monitoring[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{width:calc(33% - 8px);display:inline-flex;flex-direction:column;border:1px solid #EEEEEEFF;border-radius:2px;margin:4px;color:#121212;text-decoration:none;transition:all .2s ease;padding-bottom:4px}.price-monitoring[_ngcontent-%COMP%]   .product-item__img[_ngcontent-%COMP%]{width:100%;overflow:hidden}.price-monitoring[_ngcontent-%COMP%]   .product-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;-o-object-fit:cover;object-fit:cover;float:left}.price-monitoring[_ngcontent-%COMP%]   .product-item__price[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:16px;line-height:22px}.price-monitoring[_ngcontent-%COMP%]   .product-item__details[_ngcontent-%COMP%]{padding:0 8px;color:#a0a0a0;font-size:10px;line-height:16px}.price-monitoring[_ngcontent-%COMP%]   .product-item__details--seller-price[_ngcontent-%COMP%]{display:flex;align-items:center;color:#121212;margin:4px 0}.price-monitoring[_ngcontent-%COMP%]   .product-item__details--seller-price[_ngcontent-%COMP%]   .meta-chunk[_ngcontent-%COMP%]{font-size:12px;margin-right:16px;line-height:16px;white-space:nowrap;font-weight:700;display:inline-flex;align-items:center}.price-monitoring[_ngcontent-%COMP%]   .product-item__details--seller-price[_ngcontent-%COMP%]   .meta-chunk[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;width:14px;height:14px;float:left;margin-right:4px}.price-monitoring[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #d5d5d5}.price-monitoring[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:nth-child(1), .price-monitoring[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:nth-child(2), .price-monitoring[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:nth-child(3){margin-top:0}.price-monitoring[_ngcontent-%COMP%]   .empty-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:260px;align-items:center;justify-content:center;border-radius:4px;background:#fafafa;font-size:14px;font-weight:700;text-align:center}.price-monitoring[_ngcontent-%COMP%]   .empty-list__img[_ngcontent-%COMP%]{margin-bottom:24px}.price-monitoring[_ngcontent-%COMP%]   .activated-line[_ngcontent-%COMP%]{display:flex;align-items:center}.price-monitoring[_ngcontent-%COMP%]   .activated-line[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;width:16px;height:16px;margin-right:8px}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__top[_ngcontent-%COMP%]{background:#fff}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__nav[_ngcontent-%COMP%]{flex-wrap:wrap;width:120px;background:#fff;padding:10px 5px 0;border-radius:4px 0 0 4px}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]{padding:0;height:36px;border-right:unset;width:33%;border-radius:0;background:transparent;margin:auto}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]:nth-child(1), .price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]:nth-child(2){width:100%;height:22px;font-size:12px;padding-bottom:4px;margin-bottom:2px}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]:nth-child(2){border-bottom:1px solid #EEEEEEFF}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:none}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__logo[_ngcontent-%COMP%]{width:40px;height:94px}.price-monitoring--minimized[_ngcontent-%COMP%]   .price-monitoring__logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{transform:rotate(-90deg) translateY(-24px)}.price-monitoring--in-popup[_ngcontent-%COMP%]{position:relative;top:unset;right:unset;z-index:10;width:100%;padding-top:2px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__container[_ngcontent-%COMP%]{width:100%;min-height:unset;max-height:unset;box-shadow:#0000001f 0 1px 4px;border-radius:4px;padding:12px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__container-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__top[_ngcontent-%COMP%]{box-shadow:#0000001f 0 1px 4px;border-radius:4px;width:100%}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;width:100%}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]{white-space:nowrap;width:100%;padding:0 12px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]:after{opacity:1;background-color:#eee}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__nav-item[_ngcontent-%COMP%]:hover:after, .price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__nav-item--active[_ngcontent-%COMP%]:after{background-color:#1eb1fc}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__close[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-monitoring__content-wrapper[_ngcontent-%COMP%]{padding-top:4px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .seller-info__info[_ngcontent-%COMP%]{margin-bottom:8px;margin-top:0}.price-monitoring--in-popup[_ngcontent-%COMP%]   .seller-info__info[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:16px;padding-right:28px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .seller-info__list[_ngcontent-%COMP%]{padding-top:8px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-dynamic-info__header[_ngcontent-%COMP%]{padding:8px;margin-bottom:4px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .price-dynamic-info__chart[_ngcontent-%COMP%]{margin:0;padding:8px 8px 8px 6px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{max-height:180px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{width:calc(50% - 8px);flex-direction:row}.price-monitoring--in-popup[_ngcontent-%COMP%]   .product-item__img[_ngcontent-%COMP%]{width:35%}.price-monitoring--in-popup[_ngcontent-%COMP%]   .product-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:90px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .meta-chunk[_ngcontent-%COMP%]{margin-right:8px}.price-monitoring--in-popup[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .meta-chunk[_ngcontent-%COMP%]:last-child{margin-right:0}.price-monitoring--in-popup[_ngcontent-%COMP%]   .empty-list[_ngcontent-%COMP%]{height:180px}']})},4017:function(st,V,l){l.r(V),l.d(V,{MerchantModule:function(){return K}});var Q=l(7289),G=l(5134),c=l(1048),e=l(269),w=l(435),P=l(9870),A=l(8674),B=l(7621),x=l(7155),R=l(8774),T=l.n(R),M=l(4762),Z=l(985),E=l(7969),D=l(1528),U=l(9676),H=l(2967),N=l(9433),z=l(5848),C=l(9899),t=l(138),r=l(5947),p=l(7256),s=function(){function i(o,n,a,g){(0,G.Z)(this,i),this.popupService=o,this.externalNavigationService=n,this.configService=a,this.bg=g}return(0,Q.Z)(i,[{key:"checkBookingCondition",value:function(n){return(0,M.mG)(this,void 0,void 0,T().mark(function a(){var g,v;return T().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(g=this.bg.application.tabs.selectById(this.bg.application.tabs.currentTabId),v=g?new URL(g.get("url")):null,b.t0=N.g.BOOKING_ID!==n,b.t0){b.next=10;break}if(b.t1=N.g.BOOKING_ID===n,!b.t1){b.next=9;break}return b.next=8,z.cQ.checkConditionsBooking(v,this.configService);case 8:b.t1=b.sent;case 9:b.t0=b.t1;case 10:return b.abrupt("return",b.t0);case 11:case"end":return b.stop()}},a,this)}))}},{key:"resolve",value:function(n,a){var g=this,v=n.params.id,S=n.queryParams.directEnter;return this.popupService.selectById(v).pipe((0,E.U)(function(b){return b&&b.id?b.settings.iconClickPage&&S?(g.externalNavigationService.navigate(b.clickPageUrl,C.m.NEWTAB),null):{isDisable:!1,merchant:b,id:v}:{id:v,isDisable:!0}}),(0,D.w)(function(b){var $=b.merchant,X=b.isDisable;return X?g.popupService.selectAnyById(v).pipe((0,E.U)(function(et){return{merchant:et,isDisable:X}})):(0,Z.D)(g.checkBookingCondition($.id)).pipe((0,E.U)(function(et){return{isDisable:!et,merchant:$}}))}),(0,E.U)(function(b){return Object.assign(Object.assign({},b),{allowPriceMonitoring:N.g.ARRAY_MERCHANTS_PRICE.includes(b.merchant.id)})}),(0,U.P)())}}]),i}();s.\u0275fac=function(o){return new(o||s)(t.LFG(r.q),t.LFG(C.m),t.LFG(p.E),t.LFG(H.v))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"});var _=l(8023),h=l(3528),m=l(2522),u=l(8471),d=l(4992),y=l(9425),f=l(6209),F=l(8224),L=["tagsContainer"];function k(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"span",5),t.NdJ("click",function(){var S=t.CHM(n).$implicit;return t.oxw().categoryClick(S.id)}),t._uU(1),t.qZA()}if(2&i){var a=o.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function Y(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggleBlock()}),t.TgZ(1,"span"),t._UZ(2,"svg-icons",7),t.qZA(),t.qZA()}if(2&i){var a=t.oxw();t.xp6(2),t.s9C("name",a.show?"arrow_up":"arrow_down")}}var I=function(o){return{"merchant-categories--collapsed":o}},W=function(){function i(o){(0,G.Z)(this,i),this.cdRef=o,this.listCategories=[],this.category=new t.vpe,this.toggle=new t.vpe}return(0,Q.Z)(i,[{key:"categories",set:function(n){this.show=!1,this.listCategories=n,this.cdRef.detectChanges()}},{key:"ngOnChanges",value:function(){var n=this;setTimeout(function(){n.setButtonVisibility()})}},{key:"toggleBlock",value:function(){this.show=!this.show,this.toggle.emit({show:this.show})}},{key:"categoryClick",value:function(n){this.category.emit({id:n})}},{key:"setButtonVisibility",value:function(){this.showButton=this.tagsContainer&&this.tagsContainer.nativeElement.offsetWidth>464}}]),i}();W.\u0275fac=function(o){return new(o||W)(t.Y36(t.sBO))},W.\u0275cmp=t.Xpm({type:W,selectors:[["app-merchant-categories"]],viewQuery:function(o,n){var a;(1&o&&t.Gf(L,5,t.SBq),2&o)&&(t.iGM(a=t.CRH())&&(n.tagsContainer=a.first))},inputs:{categories:"categories"},outputs:{category:"category",toggle:"toggle"},features:[t.TTD],decls:5,vars:5,consts:[[1,"merchant-categories",3,"ngClass"],[1,"merchant-categories__container"],["tagsContainer",""],[3,"click",4,"ngFor","ngForOf"],["class","toggle-btn",3,"click",4,"ngIf"],[3,"click"],[1,"toggle-btn",3,"click"],[1,"icon",3,"name"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1,2),t.YNc(3,k,2,1,"span",3),t.qZA(),t.YNc(4,Y,3,1,"div",4),t.qZA()),2&o&&(t.Q6J("ngClass",t.VKq(3,I,n.show)),t.xp6(3),t.Q6J("ngForOf",n.listCategories),t.xp6(1),t.Q6J("ngIf",n.showButton))},directives:[c.mk,c.sg,c.O5,w.TI],styles:['[_nghost-%COMP%]{font-family:Open Sans,sans-serif}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.merchant-categories[_ngcontent-%COMP%]{display:flex;margin-bottom:12px;height:24px;max-height:24px;overflow:hidden;transition:all .3s ease;padding-right:20px;position:relative;width:100%;box-sizing:border-box}.merchant-categories__container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;flex-wrap:nowrap;position:relative;z-index:5}.merchant-categories--collapsed[_ngcontent-%COMP%]{height:auto;max-height:200px}.merchant-categories--collapsed[_ngcontent-%COMP%]   .merchant-categories__container[_ngcontent-%COMP%]{flex-wrap:wrap;z-index:20}.merchant-categories[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f5f5f5;margin:0 4px 4px 0;border-radius:15px;color:#656565;line-height:20px;padding:0 12px;white-space:nowrap;font-size:12px;font-family:Open Sans,Helvetica Neue,sans-serif;box-sizing:border-box}.merchant-categories[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:20px;height:20px;padding:0;text-align:center;cursor:pointer;margin-right:0;z-index:10;background:#fff}.merchant-categories[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#e6f6ff;width:20px;height:20px;border-radius:100%;padding:0;display:flex;align-items:center;justify-content:center}.merchant-categories[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background:#00A8FF;color:#fff}.merchant-categories[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:14px;height:14px;display:block}.merchant-categories[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:before{content:"";height:20px;width:30px;position:absolute;left:-30px;background:linear-gradient(90deg,rgba(2,0,36,0) 0%,white 85%)}']});var q=l(5350),nt=l(6715),tt=l(1591);function it(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"app-button",9),t.NdJ("onClick",function(){return t.CHM(n),t.oxw(2).onGoToCategory()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"tabStoreNotificationWithoutActivateGo")," "))}function ot(i,o){if(1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t._UZ(2,"svg-icons",7),t.TgZ(3,"div"),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"small"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t.YNc(11,it,3,3,"app-button",8),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,3,"tabStoreNotificationWithoutActivateTitle")),t.xp6(3),t.Oqu(t.lcZ(9,5,"tabStoreNotificationWithoutActivateSubTitle")),t.xp6(3),t.Q6J("ngIf",!n.merchant.isActivated)}}function at(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"app-button",10),t.NdJ("onClick",function(){return t.CHM(n),t.oxw().onActivation()}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"tabStoreCashbackActivateText")))}function rt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"app-button",10),t.NdJ("onClick",function(){return t.CHM(n),t.oxw().onLoginAndAction()}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"tabStoreCashbackActivateLogin")))}function lt(i,o){1&i&&(t.TgZ(0,"div",11),t.TgZ(1,"div",6),t._UZ(2,"svg-icons",12),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"tabStoreNotificationActivatedText")," "))}function j(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"div",6),t._UZ(2,"svg-icons",12),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"app-button",9),t.NdJ("onClick",function(){return t.CHM(n),t.oxw().onReActivation()}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"tabStoreNotificationActivatedText")," "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"tabStoreCashbackReactivateText")," "))}var J=function(){function i(){(0,G.Z)(this,i),this.loginAndActionOnSite="loginAndActionOnSite",this.activationViaSite="activationViaSite",this.directActivation="directActivation",this.activated="activated",this.activatedWithReactivation="activatedWithReactivation",this.activation=new t.vpe,this.reActivation=new t.vpe,this.goToCategory=new t.vpe}return(0,Q.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"partnerListNoActive",get:function(){return this.merchant&&this.merchant.settings.partnerListNoActive}},{key:"isActivated",get:function(){return this.merchant&&this.merchant.isActivated}},{key:"onActivation",value:function(){this.activation.emit()}},{key:"onReActivation",value:function(){this.reActivation.emit()}},{key:"onGoToCategory",value:function(){this.goToCategory.emit()}},{key:"onLoginAndAction",value:function(){this.partnerListNoActive?this.goToCategory.emit():this.activation.emit()}},{key:"showActionState",get:function(){return this.isLogin?this.isActivated?this.isActivated?this.partnerListNoActive?this.activated:this.activatedWithReactivation:void 0:this.partnerListNoActive?this.activationViaSite:this.directActivation:this.loginAndActionOnSite}}]),i}();J.\u0275fac=function(o){return new(o||J)},J.\u0275cmp=t.Xpm({type:J,selectors:[["app-merchant-actions"]],inputs:{merchant:"merchant",isLogin:"isLogin"},outputs:{activation:"activation",reActivation:"reActivation",goToCategory:"goToCategory"},decls:6,vars:6,consts:[[1,"merchant-action",3,"ngSwitch"],["class","merchant-action__go-to-category",4,"ngSwitchCase"],["variant","blue",3,"onClick",4,"ngSwitchCase"],["class","merchant-action__is-activated",4,"ngSwitchCase"],["class","merchant-action__is-activated merchant-action__is-activated--with-reactivation",4,"ngSwitchCase"],[1,"merchant-action__go-to-category"],[1,"description"],["name","info",1,"icon"],["variant","blue","size","sm",3,"onClick",4,"ngIf"],["variant","blue","size","sm",3,"onClick"],["variant","blue",3,"onClick"],[1,"merchant-action__is-activated"],["name","check",1,"icon"],[1,"merchant-action__is-activated","merchant-action__is-activated--with-reactivation"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.YNc(1,ot,12,7,"div",1),t.YNc(2,at,4,3,"app-button",2),t.YNc(3,rt,4,3,"app-button",2),t.YNc(4,lt,5,3,"div",3),t.YNc(5,j,8,6,"div",4),t.qZA()),2&o&&(t.Q6J("ngSwitch",n.showActionState),t.xp6(1),t.Q6J("ngSwitchCase",n.activationViaSite),t.xp6(1),t.Q6J("ngSwitchCase",n.directActivation),t.xp6(1),t.Q6J("ngSwitchCase",n.loginAndActionOnSite),t.xp6(1),t.Q6J("ngSwitchCase",n.activated),t.xp6(1),t.Q6J("ngSwitchCase",n.activatedWithReactivation))},directives:[c.RF,c.n9,w.TI,c.O5,tt.r],pipes:[P.X$],styles:["[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.merchant-action[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;text-align:center}.merchant-action__go-to-category[_ngcontent-%COMP%]{background:#e6f6ff;display:flex;align-items:center;justify-content:space-between;padding:8px;height:56px}.merchant-action__go-to-category[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.merchant-action__go-to-category[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;margin-right:12px;color:#00a8ff}.merchant-action__go-to-category[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:14px;color:#121212;letter-spacing:normal;text-transform:none;text-align:left;display:block}.merchant-action__go-to-category[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:10px;line-height:inherit;color:#00a8ff;letter-spacing:normal;text-transform:none;display:block}.merchant-action__is-activated[_ngcontent-%COMP%]{padding:8px;background:#e6faee;font-size:16px;display:flex;align-items:center;justify-content:center;height:56px}.merchant-action__is-activated--with-reactivation[_ngcontent-%COMP%]{justify-content:space-between;font-size:12px}.merchant-action__is-activated[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;align-items:center}.merchant-action__is-activated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;color:#00c853;margin-right:12px}"]});var O=l(4265),pt=l(7290),gt=function(o){return{"merchant-details__favorite--selected":o}};function _t(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",21),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).favoriteToggle()}),t._UZ(1,"svg-icons",22),t.qZA()}if(2&i){var a=t.oxw(3);t.Tol(t.VKq(2,gt,a.merchant.isFavorite))}}function dt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"app-merchant-categories",23),t.NdJ("category",function(v){return t.CHM(n),t.oxw(3).sendCategoryClickedGA(v)})("toggle",function(v){return t.CHM(n),t.oxw(3).sendToggleGA(v)}),t.qZA()}if(2&i){var a=t.oxw(3);t.Q6J("categories",a.merchant.categories)}}function mt(i,o){if(1&i&&(t.TgZ(0,"div",24),t._UZ(1,"app-merchant-autopromo-details",25),t.ALo(2,"autopromotion"),t.qZA()),2&i){var n=t.oxw(3);t.xp6(1),t.Q6J("showDescriptions",!0)("autoPromotion",t.lcZ(2,2,n.merchant.autoPromotion))}}function ht(i,o){if(1&i&&(t.TgZ(0,"div",26),t._UZ(1,"app-price-monitoring",27),t.qZA()),2&i){var n=t.oxw(3);t.xp6(1),t.Q6J("data",n.priceMonitoring)}}function ut(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"span",36),t._uU(2),t.qZA(),t.TgZ(3,"span",37),t._uU(4),t.qZA(),t.BQk()),2&i){var n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.rateFormated),t.xp6(2),t.Oqu(n.currentRateFormated)}}function ft(i,o){if(1&i&&(t.TgZ(0,"span",38),t._uU(1),t.qZA()),2&i){var n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.currentRateFormated)}}function vt(i,o){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,ut,5,2,"ng-container",34),t.YNc(2,ft,2,1,"span",35),t._uU(3),t.qZA()),2&i){var n=o.$implicit,a=t.oxw(4);t.xp6(1),t.Q6J("ngIf",!a.isSameConditionRate(n)),t.xp6(1),t.Q6J("ngIf",a.isSameConditionRate(n)),t.xp6(1),t.hij(" - ",n.description," ")}}function Ct(i,o){if(1&i&&(t.TgZ(0,"div",28),t.TgZ(1,"div",29),t._UZ(2,"svg-icons",30),t.TgZ(3,"div",31),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t._uU(6),t.YNc(7,vt,4,3,"div",32),t.qZA()),2&i){var n=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,3,"tabStoreCardBodyCashBackRatesHeader")," "),t.xp6(2),t.hij(" ",n.merchant.currentRateFormated," "),t.xp6(1),t.Q6J("ngForOf",n.conditions)}}function Pt(i,o){if(1&i&&(t.TgZ(0,"div",28),t.TgZ(1,"div",29),t._UZ(2,"svg-icons",39),t.TgZ(3,"div",31),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t._UZ(6,"div",40),t.qZA()),2&i){var n=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,2,"tabStoreCardBodyRulesHeader")," "),t.xp6(2),t.Q6J("innerHTML",n.merchant.longDesc,t.oJD)}}function yt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){return t.CHM(n),t.oxw(4).onCashbackLinkByVk()}),t._UZ(1,"svg-icons",52),t.qZA()}}var Mt=function(o){return{"merchant-details__cashback-link-content--active":o}};function xt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",41),t.TgZ(1,"div",42),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",43),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"app-copy-block",44),t.NdJ("copied",function(){return t.CHM(n),t.oxw(3).copied()}),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",45),t.TgZ(11,"div",46),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.YNc(14,yt,2,0,"div",47),t.TgZ(15,"div",48),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).onCashbackLinkByFb()}),t._UZ(16,"svg-icons",49),t.qZA(),t.qZA(),t.TgZ(17,"div",50),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).goToCashbackLinkInfo()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA()}if(2&i){var a=t.oxw(3);t.Q6J("ngClass",t.VKq(21,Mt,a.createCashbackLinkActive)),t.xp6(2),t.hij(" ",t.lcZ(3,9,"tabStoreFooterAdviceTitle")," "),t.xp6(3),t.hij(" ",t.lcZ(6,11,"tabStoreFooterAdviceTitleBox")," "),t.xp6(2),t.Q6J("value",a.cashbackLink)("successMessage",t.lcZ(8,13,"tabInviteInvitationReferralBoxCopiedSuccess"))("errorMessage",t.lcZ(9,15,"tabInviteInvitationReferralBoxCopiedError")),t.xp6(5),t.hij(" ",t.lcZ(13,17,"tabStoreFooterAdviceSoc")," "),t.xp6(2),t.Q6J("ngIf",a.showCashbackLinkSocialVk),t.xp6(4),t.hij(" ",t.lcZ(19,19,"tabStoreFooterAdviceHideSocInfo")," ")}}function Ot(i,o){1&i&&(t.TgZ(0,"div",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"footerAdviceTitle")," "))}function bt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(4).toggleCashbackLinkBlock()}),t.TgZ(1,"div"),t.O4$(),t.TgZ(2,"svg",58),t.TgZ(3,"g",59),t._UZ(4,"circle",60),t._UZ(5,"path",61),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(6,"div",62),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"svg-icons",63),t.qZA(),t.qZA()}2&i&&(t.xp6(8),t.Oqu(t.lcZ(9,2,"footerAdviceCreateText")),t.xp6(3),t.Oqu(t.lcZ(12,4,"footerAdviceInfo")))}function kt(i,o){if(1&i&&(t.TgZ(0,"div",53),t.YNc(1,Ot,3,3,"div",54),t.YNc(2,bt,15,6,"div",55),t.qZA()),2&i){var n=t.oxw(3),a=t.MAs(8);t.xp6(1),t.Q6J("ngIf",!n.createCashbackLinkActive),t.xp6(1),t.Q6J("ngIf",!n.createCashbackLinkActive)("ngIfElse",a)}}function Tt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"div",8),t._UZ(3,"img",9),t.qZA(),t.TgZ(4,"div"),t._UZ(5,"app-merchant-rate",10),t.qZA(),t.YNc(6,_t,2,4,"div",11),t.qZA(),t.TgZ(7,"div",12),t.YNc(8,dt,1,1,"app-merchant-categories",13),t.YNc(9,mt,3,4,"div",14),t.YNc(10,ht,2,1,"div",15),t.YNc(11,Ct,8,5,"div",16),t.YNc(12,Pt,7,4,"div",16),t.qZA(),t.TgZ(13,"div",17),t.TgZ(14,"app-merchant-actions",18),t.NdJ("activation",function(){return t.CHM(n),t.oxw(2).activation("activate")})("reActivation",function(){return t.CHM(n),t.oxw(2).activation("reactivate")})("goToCategory",function(){return t.CHM(n),t.oxw(2).goToViewedCategory()}),t.qZA(),t.YNc(15,xt,20,23,"div",19),t.qZA(),t.YNc(16,kt,3,3,"div",20),t.qZA()}if(2&i){var a=t.oxw(2);t.xp6(3),t.Q6J("src",a.merchant.logo,t.LSH)("alt",a.merchant.title),t.xp6(2),t.Q6J("merchant",a.merchant)("large",!0),t.xp6(1),t.Q6J("ngIf",a.isLogin),t.xp6(2),t.Q6J("ngIf",a.hasCategories),t.xp6(1),t.Q6J("ngIf",a.activatedAutoPromo),t.xp6(1),t.Q6J("ngIf",a.priceMonitoring),t.xp6(1),t.Q6J("ngIf",a.conditions.length),t.xp6(1),t.Q6J("ngIf",a.merchant.longDesc),t.xp6(2),t.Q6J("merchant",a.merchant)("isLogin",a.isLogin),t.xp6(1),t.Q6J("ngIf",a.showCashbackLink),t.xp6(1),t.Q6J("ngIf",a.showCashbackLink)}}function At(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Tt,17,14,"div",5),t.BQk()),2&i){var n=t.oxw(),a=t.MAs(2);t.xp6(1),t.Q6J("ngIf",n.merchant)("ngIfElse",a)}}function It(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",65),t._UZ(1,"svg-icons",39),t.TgZ(2,"span",66),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",67),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"app-button",68),t.NdJ("onClick",function(){return t.CHM(n),t.oxw(2).disabledRedirect()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"tabDisabledStoreTitle")),t.xp6(3),t.Oqu(t.lcZ(7,5,"tabDisabledStoreDescription")),t.xp6(3),t.hij(" ",t.lcZ(10,7,"tabDisabledStoreButton")," "))}function Zt(i,o){if(1&i&&t.YNc(0,It,11,9,"div",64),2&i){var n=t.oxw(),a=t.MAs(4);t.Q6J("ngIf",!n.disabledAndActivated)("ngIfElse",a)}}function wt(i,o){1&i&&(t.TgZ(0,"div",69),t._UZ(1,"svg-icons",70),t.TgZ(2,"span",66),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",67),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"tabDisabledStoreActiveCashbackTitle")),t.xp6(3),t.Oqu(t.lcZ(7,4,"tabDisabledStoreActiveCashbackDescription")))}function Et(i,o){1&i&&(t.TgZ(0,"div",71),t._UZ(1,"app-spinner",72),t.qZA()),2&i&&(t.xp6(1),t.Q6J("size",24))}function Dt(i,o){if(1&i){var n=t.EpF();t.TgZ(0,"div",73),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggleCashbackLinkBlock()}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"svg-icons",74),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"footerAdviceHideBtn")," "))}var ct=function(){function i(o,n,a,g,v,S,b,$,X,et,Lt){(0,G.Z)(this,i),this.bg=o,this.framework=n,this.router=a,this.route=g,this.eventService=v,this.externalNavigationService=S,this.configService=b,this.apiClientService=$,this.autoPromotionPipe=X,this.userService=et,this.popupService=Lt,this.width=650,this.height=450,this.destroy$=new _.x}return(0,Q.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.process=!0,this.route.data.pipe((0,E.U)(function(a){return a.data}),(0,h.R)(this.destroy$)).subscribe(function(a){n.priceMonitoring=null;var g=a.isDisable,v=a.merchant,S=a.allowPriceMonitoring;g?n.disabledMerchant=Object.assign({},v):(n.merchant=Object.assign({},v),n.activatedAutoPromo||(n.merchant.autoPromotion=null),S&&n.initPriceMonitoring()),n.process=!1})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}},{key:"application",get:function(){return this.bg.application}},{key:"isLogin",get:function(){return this.userService.isLogin}},{key:"conditions",get:function(){var n;return null!==(n=this.merchant.conditionsFormated)&&void 0!==n?n:[]}},{key:"activatedAutoPromo",get:function(){return this.merchant.autoPromotion&&(this.merchant.autoPromotion.endAt||this.merchant.autoPromotion.autoPromotion.endAt)}},{key:"hasCategories",get:function(){return this.merchant.categories&&this.merchant.categories.length}},{key:"showCashbackLinkSocialVk",get:function(){return this.userService.userInCounty(["BY","RU","KZ"])}},{key:"disabledAndActivated",get:function(){return this.disabledMerchant&&this.disabledMerchant.isActivated}},{key:"initPriceMonitoring",value:function(){return(0,M.mG)(this,void 0,void 0,T().mark(function n(){return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.isAliexpressPriceMonitoringInjectionAllowed&&this.eventService.fireEvent(N.g.NOTIFICATION_RENDER_LETYSHOPS_BAR_ALI,{tabId:this.application.tabs.currentTabId}),!this.isAliexpressCurrentContentPage){g.next=9;break}return g.prev=2,g.next=5,this.renderPriceMonitoringBlock();case 5:g.next=9;break;case 7:g.prev=7,g.t0=g.catch(2);case 9:case"end":return g.stop()}},n,this,[[2,7]])}))}},{key:"isAliexpressPriceMonitoringInjectionAllowed",get:function(){var n=this.merchant.settings.injectLetyBar;return z.cQ.isAliexpress(this.merchant.id)&&n}},{key:"isAliexpressCurrentContentPage",get:function(){var n=this.application.tabs.selectById(this.application.tabs.currentTabId),a=this.application.get("merchants").selectByDomain(n.get("domain"));return a&&a.get("id")===this.merchant.id}},{key:"renderPriceMonitoringBlock",value:function(){return(0,M.mG)(this,void 0,void 0,T().mark(function n(){var a;return T().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.eventService.fireEvent(m.P.PRICE_MONITORING_GET_PRICE_SELLER_PAGE_DATA,{tabId:this.application.tabs.currentTabId});case 2:if(a=S.sent){S.next=5;break}return S.abrupt("return");case 5:if(!a.rawData){S.next=10;break}this.priceMonitoring=a,S.next=13;break;case 10:return S.next=12,this.eventService.fireEvent(m.P.PRICE_MONITORING_GET_DATA,{tabId:null,data:a});case 12:this.priceMonitoring=S.sent;case 13:case"end":return S.stop()}},n,this)}))}},{key:"isSameConditionRate",value:function(n){return n.rateFormated===n.currentRateFormated}},{key:"activation",value:function(n){this.eventService.fireEvent(N.g.CLOSE_ALL_NOTIFICATION,{tabId:this.framework.browser.ALLTABS,data:this.merchant}),this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Extension",action:this.isLogin?"Click ".concat(n," cashback"):"Click on login",label:this.merchant.title}}),this.application.trigger(N.g.CASHBACK_ACTIVATE,this.merchant.id,function(){window.close()})}},{key:"goToViewedCategory",value:function(){this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Extension",action:this.isLogin?"Click Go to Letyshops button":"Click Go to Letyshops button on login",label:this.merchant.title}});var n=z.cQ.getLSViewedShopsPageUrl(this.merchant,"popup-no-activate-cashback");this.externalNavigationService.navigate(n,C.m.NEWTAB),window.close()}},{key:"disabledRedirect",value:function(){this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"No Extension",action:"Click On Letyshops",label:this.merchantId}});var n=this.disabledMerchant?this.disabledMerchant.disabledRedirect:"",a=this.apiClientService.config.root+n;this.externalNavigationService.navigate(a,C.m.NEWTAB)}},{key:"favoriteToggle",value:function(){this.popupService.toggleFavorite(this.merchant),this.merchant.isFavorite=!this.merchant.isFavorite}},{key:"sendCategoryClickedGA",value:function(n){this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Extension",action:"Popup category click",label:n.id}})}},{key:"sendToggleGA",value:function(n){this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Extension",action:"Popup category toggle",label:n.show?"show":"hide"}})}},{key:"toggleCashbackLinkBlock",value:function(){return(0,M.mG)(this,void 0,void 0,T().mark(function n(){return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.cashbackLink){g.next=3;break}return g.next=3,this.initCashbackLinkData();case 3:this.createCashbackLinkActive=!this.createCashbackLinkActive,this.createCashbackLinkActive&&this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"pageview",page:"".concat(N.g.gaPageAdvices+this.merchant.title,"/")}});case 5:case"end":return g.stop()}},n,this)}))}},{key:"initCashbackLinkData",value:function(){return(0,M.mG)(this,void 0,void 0,T().mark(function n(){var a;return T().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.eventService.fireEvent(m.P.CREATE_ADVICES,{data:{source:"popup"}});case 2:a=v.sent,this.cashbackLink=a.adviceLink;case 4:case"end":return v.stop()}},n,this)}))}},{key:"onCashbackLinkByVk",value:function(){this.openWindow("http://vk.com/share.php",{url:this.cashbackLink}),this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Partner Link Share",action:"vk",label:this.merchant.title}})}},{key:"onCashbackLinkByFb",value:function(){this.openWindow("http://www.facebook.com/dialog/share",{app_id:889046637871751,display:"popup",href:this.cashbackLink}),this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Partner Link Share",action:"fb",label:this.merchant.title}})}},{key:"openWindow",value:function(n,a){var g=this.externalNavigationService.buildUrl(n,this.externalNavigationService.buildQueryString(a));window.open(g,"LetyShops.com","width=".concat(this.width,", height=").concat(this.height,",left=\n\t\t\t\t").concat((window.screen.availWidth-this.width)/2,",top=\n\t\t\t\t").concat((window.screen.availHeight-this.height)/2))}},{key:"showCashbackLink",get:function(){var n=this.application.tabs.selectById(this.application.tabs.currentTabId),a=n.get("domain");return this.isLogin&&n&&a&&this.merchant.settings.partnerList&&this.popupService.merchantContainsDomain(a,this.merchant)}},{key:"goToCashbackLinkInfo",value:function(){var n;this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Partner Link",action:"Click detail",label:null===(n=this.merchant)||void 0===n?void 0:n.title}}),this.externalNavigationService.navigate(this.apiClientService.cashbackLinkInfo,C.m.NEWTAB)}},{key:"copied",value:function(){this.eventService.fireEvent(m.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Partner Link Share",action:"copy",label:this.merchant.title}})}}]),i}();ct.\u0275fac=function(o){return new(o||ct)(t.Y36(H.v),t.Y36(H.A),t.Y36(e.F0),t.Y36(e.gz),t.Y36(m.P),t.Y36(C.m),t.Y36(p.E),t.Y36(u.O),t.Y36(d.t),t.Y36(y.K),t.Y36(r.q))},ct.\u0275cmp=t.Xpm({type:ct,selectors:[["app-merchant"]],decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabled",""],["disabledActivated",""],["spinner",""],["hideCashbackLink",""],["class","merchant-details",4,"ngIf","ngIfElse"],[1,"merchant-details"],[1,"merchant-details__header"],[1,"merchant-details__logo"],[3,"src","alt"],[3,"merchant","large"],["class","merchant-details__favorite","appClickStopPropagation","",3,"class","click",4,"ngIf"],[1,"merchant-details__body"],[3,"categories","category","toggle",4,"ngIf"],["class","merchant-details__body-autopromo",4,"ngIf"],["class","merchant-details__body-pricemonitoring",4,"ngIf"],["class","merchant-details__body-info",4,"ngIf"],[1,"merchant-details__footer"],[3,"merchant","isLogin","activation","reActivation","goToCategory"],["class","merchant-details__cashback-link-content",3,"ngClass",4,"ngIf"],["class","merchant-details__cashback-link-footer",4,"ngIf"],["appClickStopPropagation","",1,"merchant-details__favorite",3,"click"],["name","star_fill",1,"icon"],[3,"categories","category","toggle"],[1,"merchant-details__body-autopromo"],[3,"showDescriptions","autoPromotion"],[1,"merchant-details__body-pricemonitoring"],["type","popup",3,"data"],[1,"merchant-details__body-info"],[1,"header"],["name","percent",1,"icon"],[1,"h3"],["class","condition-item",4,"ngFor","ngForOf"],[1,"condition-item"],[4,"ngIf"],["class","condition-item__rate",4,"ngIf"],[1,"condition-item__rate","old"],[1,"condition-item__rate","new"],[1,"condition-item__rate"],["name","info",1,"icon"],[3,"innerHTML"],[1,"merchant-details__cashback-link-content",3,"ngClass"],[1,"title"],[1,"description"],[3,"value","successMessage","errorMessage","copied"],[1,"merchant-details__cashback-link-social"],[1,"merchant-details__cashback-link-social-title"],["class","merchant-details__cashback-link-social-item merchant-details__cashback-link-social-item--vkontakte",3,"click",4,"ngIf"],[1,"merchant-details__cashback-link-social-item","merchant-details__cashback-link-social-item--facebook",3,"click"],["name","social_fb",1,"icon"],[1,"merchant-details__cashback-link-more",3,"click"],[1,"merchant-details__cashback-link-social-item","merchant-details__cashback-link-social-item--vkontakte",3,"click"],["name","social_vk",1,"icon"],[1,"merchant-details__cashback-link-footer"],["class","merchant-details__cashback-link-title",4,"ngIf"],["class","merchant-details__cashback-link-trigger",3,"click",4,"ngIf","ngIfElse"],[1,"merchant-details__cashback-link-title"],[1,"merchant-details__cashback-link-trigger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","fill-rule","evenodd"],["cx","12","cy","12","r","12","fill","#FC0"],["fill","#212121","fill-rule","nonzero","d","M13.322 10.678a.8.8 0 0 1 .232.616.8.8 0 0 1-.232.508.82.82 0 0 1-1.124 0 1.2 1.2 0 0 0-1.696 0l-2.554 2.551a1.2 1.2 0 1 0 1.698 1.698l1.51-1.512a.2.2 0 0 1 .218-.044c.406.166.841.25 1.28.248h.08a.2.2 0 0 1 .142.342l-2.1 2.1a2.8 2.8 0 0 1-3.958-3.962l2.544-2.545a2.8 2.8 0 0 1 3.96 0zm3.857-3.858a2.8 2.8 0 0 1 0 3.96l-2.546 2.546a2.8 2.8 0 0 1-1.297.736h-.022l-.116.024-.064.012-.138.02h-.068c-.052 0-.098.01-.142.011l-.12.014H12.514c-.1-.003-.2-.013-.298-.028a3.242 3.242 0 0 1-.242-.05l-.118-.031a1.589 1.589 0 0 1-.128-.042c-.042-.016-.086-.03-.128-.048-.042-.018-.084-.034-.126-.054a2.776 2.776 0 0 1-.8-.56.8.8 0 0 1 0-1.128.82.82 0 0 1 1.124 0 1.2 1.2 0 0 0 1.696 0l.656-.652.016-.018 1.875-1.874a1.2 1.2 0 1 0-1.697-1.698l-1.506 1.504a.2.2 0 0 1-.218.044 3.36 3.36 0 0 0-1.278-.25h-.074a.2.2 0 1 1-.146-.342L13.22 6.82a2.8 2.8 0 0 1 3.96 0z"],[2,"margin-left","8px"],["name","arrow_down",1,"icon"],["class","merchant-details merchant-details--disabled",4,"ngIf","ngIfElse"],[1,"merchant-details","merchant-details--disabled"],[1,"letyshops-disabled-title"],[1,"letyshops-disabled-description"],["variant","blue",3,"onClick"],[1,"merchant-details","merchant-details--disabled","merchant-details--disabled-activated"],["name","check",1,"icon"],[1,"process"],["stroke","#00a8ff",3,"size"],[1,"merchant-details__cashback-link-trigger","merchant-details__cashback-link-trigger--hide",3,"click"],["name","arrow_up",1,"icon"]],template:function(o,n){if(1&o&&(t.YNc(0,At,2,2,"ng-container",0),t.YNc(1,Zt,1,2,"ng-template",null,1,t.W1O),t.YNc(3,wt,8,6,"ng-template",null,2,t.W1O),t.YNc(5,Et,2,1,"ng-template",null,3,t.W1O),t.YNc(7,Dt,4,3,"ng-template",null,4,t.W1O)),2&o){var a=t.MAs(6);t.Q6J("ngIf",!n.process)("ngIfElse",a)}},directives:[c.O5,f.L,F.E,w.TI,W,q.d,nt.S,c.sg,J,c.mk,O.w,tt.r,pt.O],pipes:[d.t,P.X$],styles:[".merchant-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.merchant-details__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;height:50px;position:relative}.merchant-details__logo[_ngcontent-%COMP%]{margin-right:auto}.merchant-details__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:140px;max-height:50px;width:auto;height:auto;margin-right:auto;float:left}.merchant-details__favorite[_ngcontent-%COMP%]{color:#e2e2e2;margin:0 0 auto 12px;cursor:pointer}.merchant-details__favorite--selected[_ngcontent-%COMP%]{color:#fc0}.merchant-details__favorite[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;display:block}.merchant-details__body[_ngcontent-%COMP%]{margin-top:16px;color:#212121;height:268px;overflow-x:hidden;overflow-y:auto}.merchant-details__body-info[_ngcontent-%COMP%]{padding-bottom:16px;margin-bottom:16px;border-bottom:1px solid #EEEEEE;font-size:14px;line-height:20px!important;font-family:Open Sans,Aria,Helvetica,sans-serif;color:#121212}.merchant-details__body-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;position:-webkit-sticky;position:sticky;padding-bottom:8px;top:0;background:#fff}.merchant-details__body-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-weight:700;font-size:14px;line-height:20px}.merchant-details__body-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-right:8px;display:inline-block}.merchant-details__body-info[_ngcontent-%COMP%]     p{-webkit-user-select:text;-moz-user-select:text;user-select:text;margin:0 0 3px!important;padding:0!important;line-height:20px!important;text-overflow:ellipsis;cursor:text}.merchant-details__body-info[_ngcontent-%COMP%]     ul{padding-left:20px}.merchant-details__body-info[_ngcontent-%COMP%]     .b-module-info__yellow-s{padding:8px 12px;margin:8px 0;border-radius:4px;background:rgba(255,204,0,.1)}.merchant-details__body-info[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.merchant-details__body-pricemonitoring[_ngcontent-%COMP%]{margin-bottom:16px;padding:4px}.merchant-details__body-pricemonitoring[_ngcontent-%COMP%]   .pricemonitoring-empty[_ngcontent-%COMP%]{height:56px;display:flex;align-items:center;justify-content:center;box-shadow:#0000001f 0 1px 4px;border-radius:4px}.merchant-details__body-autopromo[_ngcontent-%COMP%]{margin-bottom:16px}.merchant-details__footer[_ngcontent-%COMP%]{margin-top:16px}.merchant-details[_ngcontent-%COMP%]   .condition-item[_ngcontent-%COMP%]{width:100%;padding:4px 0}.merchant-details[_ngcontent-%COMP%]   .condition-item[_ngcontent-%COMP%]:first-child{padding-top:0}.merchant-details[_ngcontent-%COMP%]   .condition-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.merchant-details[_ngcontent-%COMP%]   .condition-item__rate[_ngcontent-%COMP%]{font-weight:700;margin-right:4px;font-size:16px}.merchant-details[_ngcontent-%COMP%]   .condition-item__rate.old[_ngcontent-%COMP%]{font-weight:400;color:#a0a0a0;text-decoration:line-through}.merchant-details[_ngcontent-%COMP%]   .condition-item__rate.new[_ngcontent-%COMP%]{color:#e23e32}.merchant-details--disabled[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center}.merchant-details--disabled[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:inline-block;width:120px;height:120px;font-size:120px;color:#eee}.merchant-details--disabled[_ngcontent-%COMP%]   .letyshops-disabled-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;text-align:center;color:#121212;margin-top:24px;max-width:310px}.merchant-details--disabled[_ngcontent-%COMP%]   .letyshops-disabled-description[_ngcontent-%COMP%]{font-size:14px;color:#121212;margin:16px auto 32px;max-width:320px}.merchant-details--disabled-activated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#00c853}.merchant-details__cashback-link-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;left:0;padding:8px 16px 12px;background:#fff;display:flex;justify-content:space-between;align-items:center}.merchant-details__cashback-link-title[_ngcontent-%COMP%]{display:flex;width:200px;flex-basis:200px;font-size:10px}.merchant-details__cashback-link-trigger[_ngcontent-%COMP%]{display:flex;margin-left:auto;cursor:pointer}.merchant-details__cashback-link-trigger[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;width:16px;height:16px;margin-left:4px}.merchant-details__cashback-link-trigger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block}.merchant-details__cashback-link-trigger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){font-size:13px}.merchant-details__cashback-link-trigger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:10px;color:#a0a0a0}.merchant-details__cashback-link-trigger--hide[_ngcontent-%COMP%]{margin:0 auto;text-align:center;color:#a0a0a0;font-size:12px}.merchant-details__cashback-link-content[_ngcontent-%COMP%]{text-align:center;padding:0 32px;height:0;overflow:hidden;transition:all .2s ease-in-out}.merchant-details__cashback-link-content--active[_ngcontent-%COMP%]{height:290px}.merchant-details__cashback-link-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:20px;font-weight:400;color:#121212;margin:16px 0}.merchant-details__cashback-link-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-bottom:16px;font-size:12px}.merchant-details__cashback-link-social[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.merchant-details__cashback-link-social-title[_ngcontent-%COMP%]{width:100%;text-align:center;margin:8px 0;font-size:10px;color:#a0a0a0}.merchant-details__cashback-link-social-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:6px;width:48px;height:48px;margin:0 4px;opacity:.8;transition:all .4s ease-in-out}.merchant-details__cashback-link-social-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;display:block;color:#fff;filter:brightness(0) invert(1)}.merchant-details__cashback-link-social-item--facebook[_ngcontent-%COMP%]{background:#3a5899}.merchant-details__cashback-link-social-item--vkontakte[_ngcontent-%COMP%]{background:#5182b9}.merchant-details__cashback-link-social-item[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer}.merchant-details__cashback-link-more[_ngcontent-%COMP%]{margin-top:16px;font-size:12px;text-align:center;color:#00b0ff;cursor:pointer}.process[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}"]});var St=[{path:"",component:ct,resolve:{data:s}}],K=(0,Q.Z)(function i(o){(0,G.Z)(this,i),this.svgIconsService=o,o.registerIcons([w.Zt,w.Vs,w.jy,w.Cb,w.MH])});K.\u0275fac=function(o){return new(o||K)(t.LFG(w.tw))},K.\u0275mod=t.oAB({type:K}),K.\u0275inj=t.cJS({providers:[s],imports:[[c.ez,w.Kz,A.K,P.aw.forChild({loader:{provide:P.Zw,useClass:B.H}}),e.Bz.forChild(St),x.B]]})}}]);