"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[932],{3932:function(H,u,i){i.r(u),i.d(u,{ReferralProgramModule:function(){return v}});var d=i(7289),C=i(5134),p=i(1048),y=i(269),l=i(435),m=i(9870),M=i(8674),w=i(7621),x=i(9676),e=i(138),P=i(5947),c=function(){function r(n){(0,C.Z)(this,r),this.popupService=n}return(0,d.Z)(r,[{key:"resolve",value:function(t,o){return this.popupService.userReferralData$.pipe((0,x.P)())}}]),r}();c.\u0275fac=function(n){return new(n||c)(e.LFG(P.q))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var Z=i(8774),I=i.n(Z),_=i(4762),O=i(4970),A=i(7969),b=i(2967),T=i(9433),S=i(5848),h=i(2522),k=i(9899),R=i(8471),B=i(4265),N=i(1591);function L(r,n){if(1&r){var t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){e.CHM(t);var a=e.oxw().$implicit,Y=e.oxw(2).ngIf;return e.oxw().invite(a.key,Y.partnerUrl)}),e._UZ(1,"svg-icons",10),e.qZA()}if(2&r){var o=e.oxw().$implicit,s=e.oxw(3);e.Gre("referral-program__social-item referral-program__social-item--",o.key,""),e.xp6(1),e.Q6J("name",s.getSocialIconName(o.key))}}function E(r,n){if(1&r&&(e.ynx(0),e.YNc(1,L,2,4,"div",8),e.BQk()),2&r){var t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t.value)}}function F(r,n){if(1&r&&(e.TgZ(0,"div",6),e.YNc(1,E,2,1,"ng-container",7),e.ALo(2,"keyvalue"),e.qZA()),2&r){var t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.social))}}function J(r,n){if(1&r&&(e.TgZ(0,"div",11),e.TgZ(1,"div",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"app-copy-block",13),e.ALo(5,"translate"),e.ALo(6,"translate"),e.qZA()),2&r){var t=e.oxw().ngIf;e.xp6(2),e.hij(" ",e.lcZ(3,4,"tabInviteInvitationReferralBoxHeader")," "),e.xp6(2),e.Q6J("value",t.partnerUrl)("successMessage",e.lcZ(5,6,"tabInviteInvitationReferralBoxCopiedSuccess"))("errorMessage",e.lcZ(6,8,"tabInviteInvitationReferralBoxCopiedError"))}}function U(r,n){if(1&r&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e._UZ(2,"div",3),e.YNc(3,F,3,3,"div",4),e.YNc(4,J,7,10,"div",5),e.qZA()),2&r){var t=n.ngIf;e.xp6(1),e.Q6J("innerHTML",t.title,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.description,e.oJD),e.xp6(1),e.Q6J("ngIf",t.social),e.xp6(1),e.Q6J("ngIf",t.partnerUrl)}}function W(r,n){if(1&r){var t=e.EpF();e.TgZ(0,"div",14),e.O4$(),e.TgZ(1,"svg",15),e._UZ(2,"path",16),e.qZA(),e.kcU(),e._UZ(3,"div",17),e.ALo(4,"translate"),e.TgZ(5,"div"),e.TgZ(6,"app-button",18),e.NdJ("onClick",function(){return e.CHM(t),e.oxw().goMain()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA()}2&r&&(e.xp6(3),e.Q6J("innerHTML",e.lcZ(4,2,"tabInviteInvitationError"),e.oJD),e.xp6(4),e.hij(" ",e.lcZ(8,4,"tabInviteInvitationErrorButton")," "))}var f=function(){function r(n,t,o,s,g,a){(0,C.Z)(this,r),this.bg=n,this.eventService=t,this.apiClientService=o,this.externalNavigationService=s,this.translateService=g,this.route=a,this.width=650,this.height=450}return(0,d.Z)(r,[{key:"ngOnInit",value:function(){return(0,_.mG)(this,void 0,void 0,I().mark(function t(){var o=this;return I().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.userReferralData$=this.route.data.pipe((0,O.h)(function(a){return!!a}),(0,A.U)(function(a){return a.data})),this.eventService.fireEvent(h.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"pageview",page:T.g.gaPageFriends}}),this.translateService.get("tabReferralShareMessage").pipe((0,x.P)()).subscribe(function(a){o.inviteMsg=a});case 3:case"end":return g.stop()}},t,this)}))}},{key:"getSocialIconName",value:function(t){switch(t){case"facebook":return"social_fb";case"mw":return"social_mailru";case"odnoklasniki":return"social_ok";case"twitter":return"social_twitter";case"vkontakte":return"social_vk"}}},{key:"sendInviteGA",value:function(t){this.eventService.fireEvent(h.P.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"event",category:"Extension",action:"Invite friend",label:t}})}},{key:"invite",value:function(t,o){switch(t){case"facebook":this.onInviteByFb(o);break;case"mw":this.onInviteByMyWorld(o);break;case"odnoklasniki":this.onInviteByOk(o);break;case"twitter":this.onInviteByTwitter(o);break;case"vkontakte":this.onInviteByVk(o)}}},{key:"onInviteByVk",value:function(t){this.sendInviteGA("VK"),this.openWindow("http://vk.com/share.php",{url:t,title:this.inviteMsg})}},{key:"onInviteByFb",value:function(t){this.sendInviteGA("FB"),this.openWindow("http://www.facebook.com/dialog/share",{app_id:889046637871751,display:"popup",href:t,quote:this.inviteMsg})}},{key:"onInviteByOk",value:function(t){this.sendInviteGA("OK");var o=encodeURIComponent(t);this.openWindow("https://connect.ok.ru/dk",{"st.cmd":"OAuth2Login","st.layout":"w","st.redirect":"/dk?cmd=WidgetSharePreview&amp;st.cmd=WidgetSharePreview&amp;st.shareUrl=".concat(o),"st.client_id":-1})}},{key:"onInviteByTwitter",value:function(t){this.sendInviteGA("Tw"),this.openWindow("https://twitter.com/intent/tweet",{text:this.inviteMsg+t})}},{key:"onInviteByMyWorld",value:function(t){this.sendInviteGA("MW"),this.openWindow("https://connect.mail.ru/login",{connect:"1",page:"https://connect.mail.ru/share?share_url=".concat(t)})}},{key:"openWindow",value:function(t,o){var s=this.externalNavigationService.buildUrl(t,this.externalNavigationService.buildQueryString(o));window.open(s,"LetyShops.com","width=".concat(this.width,", height=").concat(this.height,",left=\n\t\t\t\t").concat((window.screen.availWidth-this.width)/2,",top=\n\t\t\t\t").concat((window.screen.availHeight-this.height)/2))}},{key:"goMain",value:function(){var t="".concat(this.apiClientService.root,"partner"),o={utm_source:"extension",utm_campaign:"invite_friend_error",utm_term:S.cQ.getFullInfo().browser.toLowerCase()};this.externalNavigationService.navigate(this.externalNavigationService.buildUrl(t,this.externalNavigationService.buildQueryString(o)),k.m.NEWTAB)}}]),r}();f.\u0275fac=function(n){return new(n||f)(e.Y36(b.v),e.Y36(h.P),e.Y36(R.O),e.Y36(k.m),e.Y36(m.sK),e.Y36(y.gz))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-referral-program"]],decls:4,vars:4,consts:[["class","referral-program",4,"ngIf","ngIfElse"],["empty",""],[1,"referral-program"],[3,"innerHTML"],["class","referral-program__social-list",4,"ngIf"],["class","referral-program__link",4,"ngIf"],[1,"referral-program__social-list"],[4,"ngFor","ngForOf"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"icon",3,"name"],[1,"referral-program__link"],[1,"referral-program__link-header"],[3,"value","successMessage","errorMessage"],[1,"referral-program-error"],["width","72","height","72","viewBox","0 0 48 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill","#EEE","fill-rule","evenodd","clip-rule","evenodd","d","M33.3516 1.875C30.4297 0.624994 27.3125 0 24 0C20.6875 0 17.5703 0.624994 14.6484 1.875C11.7265 3.12501 9.1797 4.83593 7.00781 7.00781C4.83593 9.1797 3.12501 11.7265 1.875 14.6484C0.624994 17.5703 0 20.6875 0 24C0 27.3125 0.624994 30.4297 1.875 33.3516C3.12501 36.2735 4.83593 38.8203 7.00781 40.9922C9.1797 43.1641 11.7265 44.875 14.6484 46.125C17.5703 47.375 20.6875 48 24 48C27.3125 48 30.4297 47.375 33.3516 46.125C36.2735 44.875 38.8203 43.1641 40.9922 40.9922C43.1641 38.8203 44.875 36.2735 46.125 33.3516C47.375 30.4297 48 27.3125 48 24C48 20.6875 47.375 17.5703 46.125 14.6484C44.875 11.7265 43.1641 9.1797 40.9922 7.00781C38.8203 4.83593 36.2735 3.12501 33.3516 1.875ZM32.1797 43.3359C29.6328 44.4453 26.9063 45 24 45C21.0937 45 18.3672 44.4453 15.8203 43.3359C13.2734 42.2266 11.0547 40.7266 9.16406 38.8359C7.27343 36.9453 5.77344 34.7266 4.66406 32.1797C3.55468 29.6328 3 26.9063 3 24C3 21.0937 3.55468 18.3672 4.66406 15.8203C5.77344 13.2734 7.27343 11.0547 9.16406 9.16406C11.0547 7.27343 13.2734 5.77344 15.8203 4.66406C18.3672 3.55468 21.0937 3 24 3C26.9063 3 29.6328 3.55468 32.1797 4.66406C34.7266 5.77344 36.9453 7.27343 38.8359 9.16406C40.7266 11.0547 42.2266 13.2734 43.3359 15.8203C44.4453 18.3672 45 21.0937 45 24C45 26.9063 44.4453 29.6328 43.3359 32.1797C42.2266 34.7266 40.7266 36.9453 38.8359 38.8359C36.9453 40.7266 34.7266 42.2266 32.1797 43.3359ZM36.6094 36.9704C36.9844 36.7829 37.2501 36.5016 37.4063 36.1266C37.5626 35.7516 37.5469 35.3766 37.3594 35.0016C37.3282 34.9079 37.0626 34.4079 36.5626 33.5016C36.0626 32.5954 35.2735 31.6188 34.1954 30.572C33.1173 29.5251 31.7345 28.5641 30.0469 27.6891C28.3594 26.8141 26.3126 26.3766 23.9063 26.3766C23.8751 26.3766 23.8438 26.3688 23.8126 26.3532C23.7813 26.3376 23.7501 26.3298 23.7188 26.3298C21.4376 26.3298 19.4766 26.7673 17.836 27.6423C16.1954 28.5173 14.8438 29.4782 13.7813 30.5251C12.7188 31.572 11.9298 32.5563 11.4141 33.4782C10.8985 34.4001 10.6251 34.8923 10.5938 34.9548C10.4063 35.361 10.3829 35.7516 10.5235 36.1266C10.6641 36.5016 10.9376 36.7829 11.3438 36.9704C11.7188 37.1266 12.0938 37.1345 12.4688 36.9938C12.8438 36.8532 13.1251 36.5954 13.3126 36.2204C13.3438 36.1579 13.5704 35.7595 13.9923 35.0251C14.4141 34.2907 15.0469 33.5095 15.8907 32.6813C16.7344 31.8532 17.8048 31.0876 19.1016 30.3845C20.3985 29.6813 21.9532 29.3298 23.7657 29.3298L23.8126 29.3532C23.8438 29.3688 23.8751 29.3766 23.9063 29.3766C25.8126 29.3766 27.4454 29.736 28.8048 30.4548C30.1641 31.1735 31.2735 31.9548 32.1329 32.7985C32.9923 33.6423 33.6251 34.4157 34.0313 35.1188C34.4376 35.822 34.6407 36.1891 34.6407 36.2204C34.7969 36.5954 35.0704 36.8532 35.461 36.9938C35.8516 37.1345 36.2344 37.1266 36.6094 36.9704ZM16.5 22.5C15.6562 22.5 14.9453 22.2031 14.3672 21.6094C13.7891 21.0156 13.5 20.3125 13.5 19.5C13.5 18.6875 13.7891 17.9844 14.3672 17.3906C14.9453 16.7969 15.6562 16.5 16.5 16.5C17.3125 16.5 18.0078 16.7969 18.5859 17.3906C19.1641 17.9844 19.4531 18.6875 19.4531 19.5C19.4531 20.3125 19.1641 21.0156 18.5859 21.6094C18.0078 22.2031 17.3125 22.5 16.5 22.5ZM31.5 22.5C30.6562 22.5 29.9453 22.2031 29.3672 21.6094C28.7891 21.0156 28.5 20.3125 28.5 19.5C28.5 18.6875 28.7891 17.9844 29.3672 17.3906C29.9453 16.7969 30.6562 16.5 31.5 16.5C32.3125 16.5 33.0078 16.7969 33.5859 17.3906C34.1641 17.9844 34.4531 18.6875 34.4531 19.5C34.4531 20.3125 34.1641 21.0156 33.5859 21.6094C33.0078 22.2031 32.3125 22.5 31.5 22.5Z"],[1,"referral-program-error__title",3,"innerHTML"],["variant","blue","size","sm",3,"onClick"]],template:function(n,t){if(1&n&&(e.YNc(0,U,5,4,"div",0),e.ALo(1,"async"),e.YNc(2,W,9,6,"ng-template",null,1,e.W1O)),2&n){var o=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,t.userReferralData$))("ngIfElse",o)}},directives:[p.O5,p.sg,l.TI,B.w,N.r],pipes:[p.Ov,p.Nd,m.X$],styles:["[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.referral-program[_ngcontent-%COMP%]{font-size:14px}.referral-program[_ngcontent-%COMP%]     li{margin-bottom:8px}.referral-program__social-list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:36px}.referral-program__social-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:6px;width:60px;height:60px;margin:0 4px;opacity:.8;transition:all .4s ease-in-out}.referral-program__social-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;display:block;color:#fff;filter:brightness(0) invert(1)}.referral-program__social-item--facebook[_ngcontent-%COMP%]{background:#3a5899}.referral-program__social-item--mw[_ngcontent-%COMP%]{background:#3688C8}.referral-program__social-item--odnoklasniki[_ngcontent-%COMP%]{background:#f77c00}.referral-program__social-item--twitter[_ngcontent-%COMP%]{background:#2AA3EF}.referral-program__social-item--vkontakte[_ngcontent-%COMP%]{background:#5182b9}.referral-program__social-item[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer}.referral-program__link[_ngcontent-%COMP%]{display:block;margin-top:36px}.referral-program__link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px;display:block}.referral-program__link-header[_ngcontent-%COMP%]{font-size:12px;margin-bottom:6px}.referral-program-error[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;flex-direction:column;text-align:center}.referral-program-error__title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin-bottom:24px;margin-top:36px}"]});var G=[{path:"",component:f,resolve:{data:c}}],v=(0,d.Z)(function r(n){(0,C.Z)(this,r),this.svgIconsService=n,n.registerIcons([l.Zt,l.Vs,l.jy,l.Cb,l.MH])});v.\u0275fac=function(n){return new(n||v)(e.LFG(l.tw))},v.\u0275mod=e.oAB({type:v}),v.\u0275inj=e.cJS({providers:[c],imports:[[p.ez,m.aw.forChild({loader:{provide:m.Zw,useClass:w.H}}),y.Bz.forChild(G),M.K,l.Kz]]})}}]);